YUI.add("album-toolbar-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,subviewConfig:{"fluid-magic-slideshow-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0}},initializer:function(e){return this.albumId=e.albumId,this.albumPhotoListLayoutStyle=e.albumPhotoListLayoutStyle,this.nsidOrPathAlias=e.nsidOrPathAlias,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},loadState:function(){var e=this;return e.appContext.getModel("set-models",e.albumId).then(function(t){e.set("albumModel",t)})},buildContainer:function(){var e=this.get("albumModel"),t=e.id,n=!1,r;return this.appContext.getViewer().signedIn&&this.appContext.getViewer().nsid===e.getValue("owner").id&&(n=!0),r=this.templates("album-toolbar")({nsidOrPathAlias:this.nsidOrPathAlias,viewerIsOwner:n,setId:t,"fluid-magic-slideshow-view":this.subviews["fluid-magic-slideshow-view"]?this.subviews["fluid-magic-slideshow-view"].get("container"):"",isJustifiedLayout:this.albumPhotoListLayoutStyle==="justified",isStoryLayout:this.albumPhotoListLayoutStyle==="story"}),this.setContainerHTML(r),this},buildErrorContainer:function(){},activate:function(){var t=this.get("container"),n=this;return this.registerEventHandler(t.all(".layout").on("click",function(r){r.preventDefault();var i=r.target.getAttribute("data-layout");i!==n.layoutStyle&&(t.one(".selected").removeClass("selected"),r.target.addClass("selected"),e.fire("albumToolbarView:layoutChange",i),n.layoutStyle=i)})),this}})},"@VERSION@",{requires:["flickr-view","hermes-template-album-toolbar","fluid-magic-slideshow-view","album-page-css"],optional:[],langBundles:["album-page"]});
YUI.add("hermes-lang-album-page",function(e,t){e.Intl.add("hermes/album-page","en-US",{PHOTOS_COUNT:[{type:"plural",valueName:"selectedCount",options:{one:"${#} photo",other:"${#} photos"}}],VIDEOS_COUNT:[{type:"plural",valueName:"selectedCount",options:{one:"${#} video",other:"${#} videos"}}],VIEWS_COUNT:[{type:"plural",valueName:"selectedCount",options:{one:"${#} view",other:"${#} views"}}],BACK_TO_ALBUMS:["Back to albums list"],EDIT_IN_ORGANIZR:["Edit in Organizr"],EDIT_COVER:["Edit cover"],SELECT_COVER_PHOTO:["Select a cover photo"],SELECT:["Select"],ERROR_COVER_PHOTO:["There was a problem trying to set your cover photo. Please try again."],ERROR_UPDATING_ALBUM_TITLE_DESCRIPTION:["There was an error updating the album's title and description."],ALBUM_ADD_DESCRIPTION:["Click here to enter a description for this album"],ERROR_CREATING_PHOTOBOOK_FROM_ALBUM:["There was a problem creating the book for this album. Please try again later."],ALBUM_DESCRIPTION:["Album description"],CREATE_BOOK_FROM_ALBUM:["Make a book from this Album"],DOWNLOAD_PHOTOS_AND_VIDEO:["Download ",{type:"plural",valueName:"photoCount",options:{one:"${#} photo",other:"${#} photos"}}," & ",{type:"plural",valueName:"videoCount",options:{one:"${#} video",other:"${#} videos"}}],DOWNLOAD_PHOTOS:["Download ",{type:"plural",valueName:"photoCount",options:{one:"${#} photo",other:"${#} photos"}}],DOWNLOAD_VIDEOS:["Download ",{type:"plural",valueName:"videoCount",options:{one:"${#} video",other:"${#} videos"}}],DOWNLOAD_ZIP:["Download zip"],DOWNLOAD_ZIP_PART:["Download zip part ","${partSequence}"],ALOT_OF_PHOTOS:["Wow, that's a lot of photos! Click to download each batch as a zip file."],DOWNLOAD_ALBUM_NOT_AVAILABLE_ERROR:["There are no photos or videos available in this album for you to download."],DOWNLOAD_ALBUM_DISABLED_ERROR:["Album downloading is currently unavailable. Please try again in a minute."],DOWNLOAD_ALBUM_GENERIC_ERROR:["There was an error downloading this album. Please try again."],CONFIRM_ALBUM_DELETE_NO_CONTENTS_DELETED:["Do you really want to delete this album? (Don't worry, none of the contents will be deleted.)"],DELETE_THIS_ALBUM:["Delete this album"],SHARE_THIS_ALBUM:["Share this album"],CREATE_NEW_ALBUM:["Create new album"]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-template-album-header",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function h(e,t){var r="",i,s;return r+='\n		<span class="edit-cover-photo" title="',s={hash:{intlName:"album-page.EDIT_COVER"},data:t},r+=f((i=n.intlMessage||e.intlMessage,i?i.call(e,s):a.call(e,"intlMessage",s)))+'">\n			<i></i>\n		</span>\n	',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression,l="function",c=this;s+='<div class="album-header-content" style="height: ',(o=n.height)?o=o.call(t,{hash:{},data:i}):(o=t.height,o=typeof o===l?o.apply(t):o),s+=f(o)+"px; background-image: url(",(o=n["cover-photo-url"])?o=o.call(t,{hash:{},data:i}):(o=t["cover-photo-url"],o=typeof o===l?o.apply(t):o),s+=f(o)+');">\n\n	<div class="dimming-shim"></div>\n	<div class="flex-padding"></div>\n\n	',o=n["if"].call(t,t.viewerIsOwner,{hash:{},inverse:c.noop,fn:c.program(1,h,i),data:i});if(o||o===0)s+=o;return s+="\n\n	",u={hash:{},data:i},s+=f((o=n.outlet||t.outlet,o?o.call(t,t["album-title-desc-view"],u):a.call(t,"outlet",t["album-title-desc-view"],u)))+"\n	",u={hash:{},data:i},s+=f((o=n.outlet||t.outlet,o?o.call(t,t["album-stats-view"],u):a.call(t,"outlet",t["album-stats-view"],u)))+"\n	",u={hash:{},data:i},s+=f((o=n.outlet||t.outlet,o?o.call(t,t["album-engagement-view"],u):a.call(t,"outlet",t["album-engagement-view"],u)))+'\n	<div class="flex-padding"></div>\n\n	',u={hash:{},data:i},s+=f((o=n.outlet||t.outlet,o?o.call(t,t["attribution-view"],u):a.call(t,"outlet",t["attribution-view"],u)))+"\n</div>",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/album-header",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-flickr-balls",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="balls">\n	<div class="blue ball"></div><div class="pink ball"></div>\n</div>'}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/flickr-balls",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-album-title-desc",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){return"editable"}function d(e,t){var r="",i,s;return r+='\n		<span class="title-desc-edit" data-action="edit" title="',s={hash:{intlName:"common.EDIT"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'"></span>\n	',r}function v(e,t){return"description-placeholder"}function m(e,t){var r="",i,s;return r+="\n			",s={hash:{},data:t},r+=l((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.description,s):f.call(e,"renderTrustedMarkup",e.description,s)))+"\n		",r}function g(e,t){var r="",i;r+="\n			",i=n["if"].call(e,e.canEdit,{hash:{},inverse:c.noop,fn:c.program(10,y,t),data:t});if(i||i===0)r+=i;return r+="\n		",r}function y(e,t){var r="",i,s;return r+="\n				",s={hash:{intlName:"album-page.ALBUM_ADD_DESCRIPTION"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"\n			",r}function b(e,t){var r="",i,s;return r+='\n	<button class="done-editing-album-title-desc hidden" data-action="saveAlbumTitleDescEdit">',s={hash:{intlName:"common.DONE"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</button>\n",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this,h="function";s+='<div class="title-desc-block ',o=n["if"].call(t,t.canEdit,{hash:{},inverse:c.noop,fn:c.program(1,p,i),data:i});if(o||o===0)s+=o;s+='">\n	<div class="',o=n["if"].call(t,t.canEdit,{hash:{},inverse:c.noop,fn:c.program(1,p,i),data:i});if(o||o===0)s+=o;s+=' album-title">\n		',(o=n.title)?o=o.call(t,{hash:{},data:i}):(o=t.title,o=typeof o===h?o.apply(t):o),s+=l(o)+"\n	</div>\n\n	",o=n["if"].call(t,t.canEdit,{hash:{},inverse:c.noop,fn:c.program(3,d,i),data:i});if(o||o===0)s+=o;s+='\n\n	<input type="text" class="meta-field edit-meta-field edit-album-title" wrap="on"></input>\n\n	<div class="',o=n["if"].call(t,t.canEdit,{hash:{},inverse:c.noop,fn:c.program(1,p,i),data:i});if(o||o===0)s+=o;s+=" album-desc ",o=n.unless.call(t,t.description,{hash:{},inverse:c.noop,fn:c.program(5,v,i),data:i});if(o||o===0)s+=o;s+='">\n		',o=n["if"].call(t,t.description,{hash:{},inverse:c.program(9,g,i),fn:c.program(7,m,i),data:i});if(o||o===0)s+=o;s+='\n	</div>\n\n	<div class="description-show-more hidden">\n		<span class="description-show-more-link ',o=n["if"].call(t,t.canEdit,{hash:{},inverse:c.noop,fn:c.program(1,p,i),data:i});if(o||o===0)s+=o;s+='" data-action="showMore">\n			',a={hash:{intlName:"common.SHOW_MORE"},data:i},s+=l((o=n.intlMessage||t.intlMessage,o?o.call(t,a):f.call(t,"intlMessage",a)))+'\n		</span>\n	</div>\n\n	<textarea class="meta-field edit-meta-field edit-album-desc" wrap="on"></textarea>\n</div>\n\n',u=n["if"].call(t,t.canEdit,{hash:{},inverse:c.noop,fn:c.program(12,b,i),data:i});if(u||u===0)s+=u;return s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/album-title-desc",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("album-title-desc-view",function(e){var t={bigFont:"26px",smallFont:"18px",heightOfOneLineOfTextUsingBigFont:29,maxNumberOfLinesOfDescriptionToShow:2,maxNumberOfLinesOfDescriptionToShowJustified:1,maxNumberOfLinesOfDescriptionToShowInEditField:4,currentDescriptionEditableFieldHeight:29,heightOfOneLineOfTextWhenJustified:29};e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.albumId=e.albumId,this.albumPhotoListLayoutStyle=e.albumPhotoListLayoutStyle,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},loadState:function(){var e=this;return e.appContext.getModel("set-models",e.albumId).then(function(t){e.set("albumModel",t)})},wrapDescription:function(e){var t;return e=e.split("\n"),t=e.length,t>1&&e.forEach(function(e,t,n){n[t]=e+"<br>"}),e.join("")},doneEditingTitleDescription:function(){var n=this,r=this.get("albumModel"),i,s,o=n.intlMessage({intlName:"album-page.ALBUM_ADD_DESCRIPTION"}),u=r.getValue("title").trim(),a=r.getValue("description").trim(),f=this.get("container"),l=f.one(".album-desc"),c=f.one(".album-title"),h=f.one(".edit-album-desc"),p=f.one(".edit-album-title"),d=f.one(".done-editing-album-title-desc");f.removeClass("editing"),i=p.get("value").trim(),i===""&&(i=u),h.get("value")!==o?s=h.get("value").trim():s="",d.addClass("hidden"),n.fire("subviewViewEvent","albumTitleDesc:doneEditing"),i!==u||s!==a?(r.setValue("title",i),r.setValue("description",s),e.rapidTracker.beacon(n.name,"albumTitleDescriptionSave"),r.remoteUpdate().then(function(){var e=r.getValue("title"),i=r.getValue("description");c.set("text",e),i.trim()!==""?(l.removeClass("description-placeholder"),i=n.wrapDescription(i),l.setHTML(i)):(l.addClass("description-placeholder"),l.setHTML(o)),p.removeClass("show-editable"),h.removeClass("show-editable"),c.removeClass("hidden"),l.removeClass("hidden"),f.hasClass("justified")?n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShowJustified):n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShow)},function(e){r.setValue("title",u),r.setValue("description",a),c.set("text",u),a.trim()!==""?(l.removeClass("description-placeholder"),l.setHTML(a)):(l.addClass("description-placeholder"),l.setHTML(o)),p.removeClass("show-editable"),h.removeClass("show-editable"),c.removeClass("hidden"),l.removeClass("hidden"),f.hasClass("justified")?n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShowJustified):n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShow),n.onError(n.intlMessage({intlName:"album-page.ERROR_UPDATING_ALBUM_TITLE_DESCRIPTION"}))})):(p.removeClass("show-editable"),h.removeClass("show-editable"),c.removeClass("hidden"),s.trim()===""?(l.addClass("description-placeholder"),l.setHTML(o)):(s=n.wrapDescription(s),l.removeClass("description-placeholder"),l.setHTML(s)),l.removeClass("hidden"),f.hasClass("justified")?n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShowJustified):n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShow)),f.hasClass("justified")&&t.currentDescriptionEditableFieldHeight!==t.heightOfOneLineOfTextWhenJustified&&(n.fire("subviewViewEvent","albumTitleDescEditing:heightChange",t.heightOfOneLineOfTextWhenJustified-t.currentDescriptionEditableFieldHeight),t.currentDescriptionEditableFieldHeight=t.heightOfOneLineOfTextWhenJustified)},editTitleDescription:function(t){var n=this,r=this.get("container"),i=n.intlMessage({intlName:"album-page.ALBUM_ADD_DESCRIPTION"}),s=r.one(".album-title"),o,u=r.one(".edit-album-desc"),a=r.one(".edit-album-title"),f=this.get("albumModel"),l=f.getValue("title"),c=f.getValue("description").trim(),h,p=r.one(".description-show-more"),d=r.one(".done-editing-album-title-desc");(t.target.hasClass("editable album-title")||t.target.hasClass("editable album-desc")||t.target.ancestor().hasClass("editable album-desc")||t.target.hasClass("title-desc-edit")||t.target.hasClass("description-show-more-link editable")||t.target.hasClass("title-desc-block editable"))&&t.target.get("tagName").toLowerCase()!=="a"&&(t.preventDefault(),t.stopPropagation(),r.addClass("editing"),p.addClass("hidden"),n.fire("subviewViewEvent","albumTitleDesc:editing"),d.removeClass("hidden"),o=s.getXY(),a.set("value",l),a.setStyle("height",s.get("offsetHeight")),a.setStyle("width",s.get("offsetWidth")),a.setStyle("left",o[0]),a.setStyle("top",o[1]),s.addClass("hidden"),a.addClass("show-editable"),c?(h=c.replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<"),u.removeClass("description-placeholder")):(h=i,u.addClass("description-placeholder")),u.set("value",h),n.makeDescriptionEditFieldResponsive(),t.target.hasClass("editable album-title")?a.focus():u.focus(),e.rapidTracker.beacon(n.name,"albumTitleDescriptionEdit"))},makeDescriptionEditFieldResponsive:function(){var e=this,n=this.get("container"),r=n.one(".album-desc"),i,s,o,u,a=n.one(".edit-album-desc"),f=a.get("value"),l,c=!1;n.hasClass("justified")&&(c=!0),f?(f=f.replace(/"/g,"&quot;").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),f=e.wrapDescription(f),r.addClass("calculating").removeClass("hidden"),r.setHTML(f),s=parseInt(r.getComputedStyle("height"),10),s>t.heightOfOneLineOfTextUsingBigFont*t.maxNumberOfLinesOfDescriptionToShowInEditField?a.setStyle("height",t.heightOfOneLineOfTextUsingBigFont*t.maxNumberOfLinesOfDescriptionToShowInEditField):a.setStyle("height",s),c&&(l=parseInt(a.getComputedStyle("height"),10),l!==t.currentDescriptionEditableFieldHeight&&(i=l-t.currentDescriptionEditableFieldHeight,e.fire("subviewViewEvent","albumTitleDescEditing:heightChange",i),t.currentDescriptionEditableFieldHeight=l)),o=r.get("offsetWidth"),u=r.getXY(),a.setStyle("width",o),a.setStyle("left",u[0]),a.setStyle("top",u[1]),r.addClass("hidden").removeClass("calculating"),a.addClass("show-editable")):(a.setStyle("height",t.heightOfOneLineOfTextUsingBigFont),r.addClass("hidden").removeClass("calculating"))},displayShowMoreIfNeeded
:function(e){var n=this.get("container"),r,i=n.one(".album-desc"),s=n.one(".title-desc-block"),o=n.one(".description-show-more");i&&(r=i.cloneNode(!0),r.removeClass("album-desc"),r.addClass("album-desc-calculator"),s.append(r),parseInt(r.getComputedStyle("height"),10)>t.heightOfOneLineOfTextUsingBigFont*e?o.removeClass("hidden"):o.addClass("hidden"),r.remove(!0))},showMoreClick:function(t){var n=this,r=this.get("albumModel"),i=r.getValue("description"),s=this.get("container").one(".description-show-more"),o;i=n.wrapDescription(i),t.target.hasClass("editable")?(s.addClass("hidden"),n.editTitleDescription(t)):(o=new e.Views.FluidModal({appContext:n.appContext,title:n.intlMessage({intlName:"album-page.ALBUM_DESCRIPTION"}),message:i,actionButtonLabel:n.intlMessage({intlName:"common.OK"}),showCancelButton:!1,classList:"album-full-description"}),o.show())},buildContainer:function(){var e=this,t=this.get("albumModel"),n=t.getValue("title"),r=t.getValue("description"),i=t.getValue("isAutoUploadSet"),s=!1,o=!1,u=this.get("container"),a;return r.trim()!==""&&(o=!0,this.albumPhotoListLayoutStyle==="justified"&&u.addClass("justified"),r=e.wrapDescription(r)),this.appContext.getViewer().signedIn&&this.appContext.getViewer().nsid===t.getValue("owner").id&&!i&&(s=!0),a=this.templates("album-title-desc")({title:n,description:r,hasDescription:o,canEdit:s}),this.setContainerHTML(a),this},buildErrorContainer:function(){},activate:function(){var n=this,r=this.get("albumModel"),i=this.get("container"),s=n.intlMessage({intlName:"album-page.ALBUM_ADD_DESCRIPTION"}),o=i.one(".title-desc-block"),u=i.one(".edit-album-title"),a=i.one(".edit-album-desc"),f=i.one(".title-desc-edit"),l=i.one(".description-show-more-link"),c=!1;return this.appContext.getViewer().signedIn&&this.appContext.getViewer().nsid===r.getValue("owner").id&&(c=!0),i.hasClass("justified")?n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShowJustified):n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShow),c&&!r.getValue("isAutoUploadSet")&&(n.registerEventHandler(o.on("click",function(e){n.editTitleDescription(e)},o)),n.registerEventHandler(f.on("click",function(e){n.editTitleDescription(e)},f))),n.registerEventHandler(l.on("click",function(e){n.showMoreClick(e)},l)),this.registerEventHandler(u.on("keyup",function(e){e.keyCode===13&&n.doneEditingTitleDescription()},this)),this.registerEventHandler(u.on("blur",function(t){setTimeout(function(){!e.config.doc.activeElement.isEqualNode(u.getDOMNode())&&!e.config.doc.activeElement.classList.contains("edit-album-desc")&&n.doneEditingTitleDescription()},1,u)},this)),this.registerEventHandler(a.on("keyup",function(e){n.makeDescriptionEditFieldResponsive()},this)),this.registerEventHandler(a.on("blur",function(t){a.get("value").trim()===""?(a.addClass("description-placeholder"),a.set("value",s)):a.removeClass("description-placeholder"),setTimeout(function(){!e.config.doc.activeElement.isEqualNode(a.getDOMNode())&&!e.config.doc.activeElement.classList.contains("edit-album-title")&&n.doneEditingTitleDescription()},1,a)},this)),this.registerEventHandler(a.on("focus",function(){a.get("value").trim()===s&&(a.removeClass("description-placeholder"),a.set("value",""))},this)),e.on("albumToolbarView:layoutChange",function(e){e==="justified"?(i.addClass("justified"),n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShowJustified)):(i.removeClass("justified"),n.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShow))}),this},onError:function(t){return this.errorDialog=new e.Views.FluidModal({appContext:this.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!0,showCancelButton:!1,title:this.intlMessage({intlName:"common.OOPS"}),actionButtonLabel:this.intlMessage({intlName:"common.OK"}),message:t,darkOverlay:!0}),this.errorDialog.show(),this.errorDialog}})},"@VERSION@",{requires:["flickr-view","hermes-template-album-title-desc","album-title-desc-css","handlebars-helpers"],optional:[],langBundles:["common","album-page"]});
YUI.add("hermes-template-album-stats",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function l(e,t){var r="",i,s;return r+='\n		<span class="photo-counts">',s={hash:{intlName:"album-page.PHOTOS_COUNT",selectedCount:e.photosArePresent},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</span>\n	",r}function c(e,t){var r="",i,s;r+="\n		",i=n["if"].call(e,e.photosArePresent,{hash:{},inverse:f.noop,fn:f.program(4,h,t),data:t});if(i||i===0)r+=i;return r+='\n		<span class="video-counts">',s={hash:{intlName:"album-page.VIDEOS_COUNT",selectedCount:e.videosArePresent},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</span>\n	",r}function h(e,t){return'\n			<span class="album-stats-separator">&middot;</span>\n		'}function p(e,t){var r="",i,s;return r+='\n		<span class="album-stats-separator">&middot;</span>\n		<span class="view-counts">',s={hash:{intlName:"album-page.VIEWS_COUNT",selectedCount:e.viewsArePresent},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</span>\n	",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=n.helperMissing,a=this.escapeExpression,f=this;s+='<div class="stats-container">\n	',o=n["if"].call(t,t.photosArePresent,{hash:{},inverse:f.noop,fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;s+="\n	",o=n["if"].call(t,t.videosArePresent,{hash:{},inverse:f.noop,fn:f.program(3,c,i),data:i});if(o||o===0)s+=o;s+="\n	",o=n["if"].call(t,t.viewsArePresent,{hash:{},inverse:f.noop,fn:f.program(6,p,i),data:i});if(o||o===0)s+=o;return s+="\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/album-stats",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("album-stats-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.albumId=e.albumId,this.albumPhotoListLayoutStyle=e.albumPhotoListLayoutStyle,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},loadState:function(){var e=this;return e.appContext.getModel("set-models",e.albumId).then(function(t){e.set("albumModel",t)})},buildContainer:function(){var e=this.get("albumModel"),t=e.getValue("photoCount"),n=e.getValue("videoCount"),r=e.getValue("viewCount"),i=this.get("container"),s;return this.albumPhotoListLayoutStyle==="justified"&&i.addClass("justified"),s=this.templates("album-stats")({photosArePresent:t,videosArePresent:n,viewsArePresent:r}),this.setContainerHTML(s),this},buildErrorContainer:function(){},activate:function(){return this},onParentViewEvent:function(e,t){var n=this,r=n.get("container");if(e==="album-stats-view"&&t[0]==="albumHeaderView:editing")return r.addClass("invisible"),!1;if(e==="album-stats-view"&&t[0]==="albumHeaderView:doneEditing")return r.removeClass("invisible"),!1}})},"@VERSION@",{requires:["flickr-view","hermes-template-album-stats"],optional:[],langBundles:["common","album-page"]});
YUI.add("hermes-template-album-engagement",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function h(e,t){var r="",i,s;return r+='\n	<div class="create-book-container">\n		<span class="create-book-icon" title="',s={hash:{intlName:"album-page.CREATE_BOOK_FROM_ALBUM"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'"></span>\n	</div>\n',r}function p(e,t){return'\n	<div class="download-album-container">\n		<span class="download-album-icon"></span>\n	</div>\n'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this;a={hash:{},data:i},s+=l((o=n.outlet||t.outlet,o?o.call(t,t["fluid-share-album-view"],a):f.call(t,"outlet",t["fluid-share-album-view"],a)))+"\n\n",u=n["if"].call(t,t.viewerIsOwner,{hash:{},inverse:c.noop,fn:c.program(1,h,i),data:i});if(u||u===0)s+=u;s+="\n\n\n",u=n["if"].call(t,t.enableDownload,{hash:{},inverse:c.noop,fn:c.program(3,p,i),data:i});if(u||u===0)s+=u;return s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/album-engagement",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-modal",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){return" html-modal"}function h(e,t){return" subview-modal"}function p(e,t){return'<div class="close-x"></div>'}function d(e,t){var r="",i;r+='\n		<div class="head">\n			',i=n["if"].call(e,e.navBarView,{hash:{},inverse:l.program(10,m,t),fn:l.program(8,v,t),data:t});if(i||i===0)r+=i;return r+='\n			<div class="extra"></div>\n		</div>\n	',r}function v(e,t){return'\n				<div class="nav"></div>\n			'}function m(e,t){var r="",i;r+='\n				<div class="title">\n					',i=n["if"].call(e,e.title,{hash:{},inverse:l.program(13,y,t),fn:l.program(11,g,t),data:t});if(i||i===0)r+=i;return r+="\n				</div>\n			",r}function g(e,t){var r="",i;return r+="\n						",(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e.title,i=typeof i===u?i.apply(e):i),r+=a(i)+"\n					",r}function y(e,t){var r="",i,s;return r+="\n						",s={hash:{},data:t},r+=a((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.htmlTitle,s):f.call(e,"renderTrustedMarkup",e.htmlTitle,s)))+"\n					",r}function b(e,t){return" lines"}function w(e,t){var r="",i;r+='\n			<div class="content text-only ',i=n["if"].call(e,e.noScroll,{hash:{},inverse:l.noop,fn:l.program(18,E,t),data:t});if(i||i===0)r+=i;i=n["if"].call(e,e.showFooter,{hash:{},inverse:l.noop,fn:l.program(20,S,t),data:t});if(i||i===0)r+=i;return r+='">\n				',(i=n.textMessage)?i=i.call(e,{hash:{},data:t}):(i=e.textMessage,i=typeof i===u?i.apply(e):i),r+=a(i)+"\n			</div>\n		",r}function E(e,t){return" no-scroll"}function S(e,t){return" has-footer"}function x(e,t){var r="",i,s;r+='\n			<div class="content html-only ',i=n["if"].call(e,e.noScroll,{hash:{},inverse:l.noop,fn:l.program(18,E,t),data:t});if(i||i===0)r+=i;i=n["if"].call(e,e.showFooter,{hash:{},inverse:l.noop,fn:l.program(20,S,t),data:t});if(i||i===0)r+=i;return r+='">\n				',s={hash:{},data:t},r+=a((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.htmlMessage,s):f.call(e,"renderTrustedMarkup",e.htmlMessage,s)))+"\n			</div>\n		",r}function T(e,t){var r="",i;r+='\n			<div class="content subview ',i=n["if"].call(e,e.noScroll,{hash:{},inverse:l.noop,fn:l.program(18,E,t),data:t});if(i||i===0)r+=i;i=n["if"].call(e,e.showFooter,{hash:{},inverse:l.noop,fn:l.program(20,S,t),data:t});if(i||i===0)r+=i;return r+='"></div>\n		',r}function N(e,t){var r="",i,s;r+='\n		<div class="foot">\n			',s=n["if"].call(e,(i=e.buttons,i==null||i===!1?i:i.visible),{hash:{},inverse:l.noop,fn:l.program(27,C,t),data:t});if(s||s===0)r+=s;return r+="\n		</div>\n	",r}function C(e,t){var r="",i,s;r+='\n			<div class="buttons">\n				',s=n["if"].call(e,(i=(i=e.buttons,i==null||i===!1?i:i.action),i==null||i===!1?i:i.visible),{hash:{},inverse:l.noop,fn:l.program(28,k,t),data:t});if(s||s===0)r+=s;r+="\n				",s=n["if"].call(e,(i=(i=e.buttons,i==null||i===!1?i:i.cancel),i==null||i===!1?i:i.visible),{hash:{},inverse:l.noop,fn:l.program(33,O,t),data:t});if(s||s===0)r+=s;r+="\n				",s=n["if"].call(e,(i=e.buttons,i==null||i===!1?i:i.flavorText),{hash:{},inverse:l.noop,fn:l.program(35,M,t),data:t});if(s||s===0)r+=s;return r+="\n			</div>\n			",r}function k(e,t){var r="",i,s;r+='<button class="mini ',s=n["if"].call(e,(i=(i=e.buttons,i==null||i===!1?i:i.action),i==null||i===!1?i:i.isDangerous),{hash:{},inverse:l.noop,fn:l.program(29,L,t),data:t});if(s||s===0)r+=s;r+=' action"',s=n["if"].call(e,(i=(i=e.buttons,i==null||i===!1?i:i.action),i==null||i===!1?i:i.disabled),{hash:{},inverse:l.noop,fn:l.program(31,A,t),data:t});if(s||s===0)r+=s;return r+=">"+a((i=(i=(i=e.buttons,i==null||i===!1?i:i.action),i==null||i===!1?i:i.label),typeof i===u?i.apply(e):i))+"</button>",r}function L(e,t){return"danger"}function A(e,t){return' disabled="disabled"'}function O(e,t){var n="",r;return n+='<button class="mini alt cancel">'+a((r=(r=(r=e.buttons,r==null||r===!1?r:r.cancel),r==null||r===!1?r:r.label),typeof r===u?r.apply(e):r))+"</button>",n}function M(e,t){var r="",i,s,o;r+='\n				<div class="flavor-text secondary',s=n.unless.call(e,(i=(i=e.buttons,i==null||i===!1?i:i.flavorText),i==null||i===!1?i:i.visible),{hash:{},inverse:l.noop,fn:l.program(36,_,t),data:t});if(s||s===0)r+=s;return r+='">',o={hash:{},data:t},r+=a((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,(i=(i=e.buttons,i==null||i===!1?i:i.flavorText),i==null||i===!1?i:i.text),o):f.call(e,"renderTrustedMarkup",(i=(i=e.buttons,i==null||i===!1?i:i.flavorText),i==null||i===!1?i:i.text),o)))+"</div>\n				",r}function _(e,t){return" hidden"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=n.helperMissing,l=this;s+='<div class="modal',o=n["if"].call(t,t.htmlMessage,{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;o=n["if"].call(t,t.subview,{hash:{},inverse:l.noop,fn:l.program(3,h,i),data:i});if(o||o===0)s+=o;s+=" ",(o=n.classList)?o=o.call(t,{hash:{},data:i}):(o=t.classList,o=typeof o===u?o.apply(t):o),s+=a(o)+'">\n	',o=n["if"].call(t,t.showCancelX,{hash:{},inverse:l.noop,fn:l.program(5,p,i),data:i});if(o||o===0)s+=o;s+="\n	",o=n["if"].call(t,t.showHeader,{hash:{},inverse:l.noop,fn:l.program(7,d,i),data:i});if(o||o===0)s+=o;s+='\n	<div class="body',o=n["if"].call(t,t.showBodyLines,{hash:{},inverse:l.noop,fn:l.program(15,b,i),data:i});if(o||o===0)s+=o;s+='">\n		',o=n["if"].call(t,t.textMessage,{hash:{},inverse:l.noop,fn:l.program(17,w,i),data:i});if(o||o===0)s+=o;s+="\n		",o=n["if"].call(t,t.htmlMessage,{hash:{},inverse:l.noop,fn:l.program(22,x,i),data:i});if(o||o===0)s+=o;s+="\n		",o=n["if"].call(t,t.subview,{hash:{},inverse:l.noop,fn:l.program(24,T,i),data:i});if(o||o===0)s+=o;s+="\n	</div>\n	",o=n["if"].call(t,t.showFooter,{hash:{},inverse:l.noop,fn:l.program(26,N,i),data:i});if(o||o===0)s+=o;return s+="\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-modal",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials
):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("fluid-overlay-manager-view",function(e){"use strict";var t=e.Base.create("overlayManager",e.Base,[],{add:function(t){var n=this.get("overlay"),r=t.getAttrs(),i=this;this.get("modals").push(t),n?r.dismissOnOverlayClick&&this.set("dismissOnOverlayClick",!0):(n=e.Node.create(this.get("overlayHTML")),e.one("body").append(n),this.set("overlay",n),this.addOverlayClickHandler(n),this.addOverlayKeyHandler(n),r.dismissOnOverlayClick?this.set("dismissOnOverlayClick",!0):this.set("dismissOnOverlayClick",!1)),this.setOverlayStyle(r),r.dismissOnActionClick&&t.on("actionClick",function(){setTimeout(function(){i.close()},0)}),t.name==="fluid-modal-view"&&t.on("cancelClick",function(){setTimeout(function(){i.close()},0)})},setOverlayStyle:function(e){var t="",n="",r="",i=this.get("overlay");e.hideModalOverlay&&(t="transparent"),e.darkOverlay&&(t="dark-overlay"),e.invisibleOverlay&&(n="invisible"),e.overlayClassList&&(r=e.overlayClassList),i.setAttribute("class",this.get("overlayClass")+" "+r+" "+t+" "+n)},addOverlayClickHandler:function(e){e.getDOMNode().addEventListener("click",this.clickHandler.bind(this))},removeOverlayClickHandler:function(e){e.getDOMNode().removeEventListener("click",this.clickHandler.bind(this))},addOverlayKeyHandler:function(t){e.one("body").getDOMNode().addEventListener("keyup",this.keyHandler.bind(this))},removeOverlayKeyHandler:function(t){e.one("body").getDOMNode().removeEventListener("keyup",this.keyHandler.bind(this))},keyHandler:function(e){e.keyCode===27&&this.clickHandler()},clickHandler:function(){var e=this.get("modals").length-2,t="",n="",r="",i,s=this.get("overlay");this.get("dismissOnOverlayClick")&&(this.set("dismissOnOverlayClick",!1),this.close(),e>-1&&this.get("modals").length>0&&(i=this.get("modals")[e].getAttrs(),i.hideModalOverlay&&(t="transparent"),i.invisibleOverlay&&(n="invisible"),i.overlayClassList&&(r=i.overlayClassList),s.setAttribute("class",this.get("overlayClass")+" "+r+" "+t+" "+n),this.set("dismissOnOverlayClick",i.dismissOnOverlayClick)))},remove:function(e){var t=this.get("modals");if(e.isClosed){var n=t.indexOf(e);n>-1?t.splice(n,1):t.length===1&&(n=0,t.splice(n,1)),this.removeOverlay()}},close:function(){var e=this.get("modals").pop();e&&!e.isClosed&&e.close(),this.removeOverlay()},closeAll:function(){var e=this;this.get("modals").forEach(function(t,n){e.close()})},removeOverlay:function(){var e=this.get("overlay");if(this.get("modals").length===0&&e)this.removeOverlayClickHandler(e),this.removeOverlayKeyHandler(e),e.remove(),this.set("overlay",undefined);else{var t=this.get("modals").length-1;t>-1&&this.setOverlayStyle(this.get("modals")[t].getAttrs())}},alreadyShowingModal:function(e){var t=!1;return e||(e="fluid-modal-view"),this.get("modals").forEach(function(n,r){n.name===e&&(t=!0)}),t}},{ATTRS:{modals:{value:[],validator:function(t){return e.Lang.isArray(t)}},overlayHTML:{},overlayClass:{},overlay:{value:undefined},dismissOnOverlayClick:{value:!0,setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},validator:function(t){return e.Lang.isBoolean(t)}}}});e.OverlayManager={DroparoundOverlay:new t({overlayHTML:'<div class="fluid-droparound-overlay"></div>',overlayClass:"fluid-droparound-overlay"}),ModalOverlay:new t({overlayHTML:'<div class="fluid-modal-overlay"><div class="balls"></div></div>',overlayClass:"fluid-modal-overlay"}),ChalkboardOverlay:new t({overlayHTML:'<div class="fluid-chalkboard-overlay"></div>',overlayClass:"fluid-chalkboard-overlay"})}},"@VERSION@",{requires:["base","flickr-view","attribute-helpers","fluid-css","fluid-balls-css"],optional:[],langBundles:[],optionalRequires:["fluid"]});
YUI.add("fluid",function(e){"use strict";function n(){var n="",r=[];return!t.prefix&&"getComputedStyle"in e.config.win&&(r=Array.prototype.slice.call(e.config.win.getComputedStyle(e.config.doc.documentElement,"")),n=r.join("").match(/-(webkit|moz|ms)-/),n=n&&n.length>1?n[1]:"",t.prefix.raw=n.toLowerCase(),t.prefix.css="-"+n+"-",t.prefix.js=n.charAt(0).toUpperCase()+n.slice(1),t.prefix.dom="WebKit|Moz|MS".match(new RegExp("("+n+")","i"))[1]),t.prefix}function r(t,n){return n=n||e.config.win,new e.Promise(function(r,i){setTimeout(e.bind(function(){r(t.call(n))},n),1)})}function i(e,n,r){return t.prefix.css!==""?r.getDOMNode().style.setProperty(t.prefix.css+e,n,null):r.setStyle(e,n),r}function s(n){var r=!1;return n+="",r=n in e.config.doc.body.style,r||(n=n.charAt(0).toUpperCase()+n.slice(1),r=t.prefix.raw+n in e.config.doc.body.style),r}function o(n,r){return r=r||{timeout:1e4,retry:!1},r.timeout=parseInt(r.timeout,10),isNaN(r.timeout)&&(r.timeout=1e4),new e.Promise(function(e,i){t.loadImage.imageQueue.push({src:n,options:r,done:e,error:i}),u()})}function u(){var e=null;t.loadImage.currentWorkers<t.loadImage.maxWorkers-1&&t.loadImage.imageQueue.length&&(t.loadImage.currentWorkers++,e={image:new Image,work:t.loadImage.imageQueue.shift(),timeout:null,loaded:null,finished:null},e.finished=function(e){return function(n){clearTimeout(e.timeout),e.image.removeEventListener("load",e.finished),e.image.removeEventListener("error",e.finished),e.image.removeEventListener("abort",e.finished),n.type==="load"?e.work.done(e.work.src):e.work.options.retry?o(e.work.src,{retry:!1,timeout:e.work.options.timeout}).then(function(e){return function(t){e(t)}}(e.work.done),function(e){return function(t){e(t)}}(e.work.done)):e.work.error(e.work.src),e.image=null,e=null,t.loadImage.currentWorkers--,u()}}(e),e.image.addEventListener("load",e.finished),e.image.addEventListener("error",e.finished),e.image.addEventListener("abort",e.finished),e.image.src=e.work.src,e.timeout=setTimeout(function(e){return function(){e.finished({type:"error"})}}(e),e.work.options.timeout),e.image.complete&&e.finished({type:"load"}))}function a(n){return n="https:"+n,new e.Promise(function(e,r){t.loadImageFastLane.imageHash[n]={done:e,error:r},t.loadImageFastLane.imageQueue.push(n),f()})}function f(){var e,n;t.loadImageFastLane.currentWorkers<t.loadImageFastLane.maxWorkers&&t.loadImageFastLane.imageQueue.length&&(e=t.loadImageFastLane.imageQueue.shift(),n=l(),n.onmessage=function(e){var n=e.data;t.loadImageFastLane.imageHash[n].done(n),t.loadImageFastLane.currentWorkers--,f()}.bind(this),n.postMessage(e),t.loadImageFastLane.currentWorkers++)}function l(){var e=window.URL||window.webkitURL,t;return t=e.createObjectURL(new Blob(["(",function(){self.onmessage=function(e){var t=new XMLHttpRequest,n=e.data;t.responseType="blob",t.onerror=function(){self.postMessage(n),self.close()},t.onload=function(){self.postMessage(n),self.close()},t.open("GET",n,!0),t.withCredentials=!0,t.send()}}.toString(),")()"],{type:"application/javascript"})),new Worker(t)}function c(t){var n;return t&&(n=e.config.doc.createElement("div"),n.appendChild(e.config.doc.createTextNode(t)),t=n.innerHTML),t}function h(t){var n,r;return e.config.doc.selection?(r=e.config.doc.selection.createRange(),r.moveStart=("character",-t.get("value").length),n=r.text.length):typeof t.get("selectionStart")=="number"&&(n=t.get("selectionStart")),n}function p(){var t="";return typeof e.config.win.getSelection!="undefined"?t=e.config.win.getSelection().toString():typeof e.config.doc.selection!="undefined"&&e.config.doc.selection.type==="Text"&&(t=e.config.doc.selection.createRange().text),t}var t={prefix:{raw:"",css:"",js:"",dom:""},loadImage:{maxWorkers:8,currentWorkers:0,imageQueue:[],workingWorkers:[]},loadImageFastLane:{maxWorkers:8,currentWorkers:0,imageHash:{},imageQueue:[],availabeWorkers:[],workingWorkers:[]}};(function(){n()})(),e.namespace("fluid"),e.mix(e.fluid,{determineBrowserPrefix:n,setStylePrefixed:i,supports:s,prefix:t.prefix,chill:r,loadImage:o,loadImageFastLane:a,escapeHtml:c,getTextFieldCursorPosition:h,getTextFieldSelection:p})},"@VERSION@",{requires:["flickr-promise"],optional:[],affinity:"client"});
YUI.add("fluid-modal-view",function(e,t){"use strict";var n,r;n={css:{destinationContainer:"body",closeX:".close-x",buttonCancel:"button.cancel",buttonAction:"button.action",navBarContent:".head .nav",subviewContent:".content.subview",modalContent:".body .content"},options:{}},r={supportsTransform:!1,modal:{height:0,width:0}},e.namespace("Views").FluidModal=e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.set("isActiveViewAgnostic",!0),this.alreadyShowingModal=e.OverlayManager.ModalOverlay.alreadyShowingModal(),this.alreadyShowingModal||e.OverlayManager.ModalOverlay.add(this),this},activate:function(){var t=this.get("container"),r=this;return this.get("showCancelX")&&this.registerEventHandler(t.one(n.css.closeX).on("click",e.bind(this.handleCancel,this))),this.get("showFooter")&&this.get("showCancelButton")&&this.get("showButtons")&&this.registerEventHandler(t.one(n.css.buttonCancel).on("click",e.bind(this.handleCancel,this))),this.get("showFooter")&&this.get("showActionButton")&&this.get("showButtons")&&this.registerEventHandler(t.one(n.css.buttonAction).on("click",e.bind(this.handleAction,this))),this.registerEventHandler(this.appContext.flapp.on("activeViewChange",function(e){r.close(e)})),this.registerEventHandler(e.globalEvents.subscribe("window:resize",function(e){r.reposition()})),this.get("navBarView")&&r.get("navBarView").activate(),this.get("subview")&&(r.get("subview").activate(),r.registerEventHandler(r.get("subview").on("actionClick",e.bind(r.handleAction,r)))),this.fire("activated"),this},show:function(){return this.initialize().then(null,function(t){e.Flog.error("[fluid-modal-view] Error initializing modal: ",t)}),this.isClosed=!1,this.freeze(),e.fire("flickr:setKeyEventScope",this.getKeyEventScope()),this},freeze:function(){e.one("body").setStyles({overflow:"hidden"})},unfreeze:function(){e.one("body").setStyles({overflow:"visible"})},enableActionButton:function(){var e=this.get("container").one("button.action");e&&e.getAttribute("disabled")&&e.removeAttribute("disabled")},disableActionButton:function(){var e=this.get("container").one("button.action");e&&e.setAttribute("disabled",!0)},showFlavorText:function(){var e=this.get("container").one(".buttons .flavor-text");e&&e.removeClass("hidden")},hideFlavorText:function(){var e=this.get("container").one(".buttons .flavor-text");e&&e.addClass("hidden")},buildContainer:function(){if(!this.alreadyShowingModal){var t=this,i=e.one(n.css.destinationContainer),s;s={showCancelX:this.get("showCancelX"),title:this.get("title"),htmlTitle:this.get("htmlTitle"),navBarView:!!this.get("navBarView"),noScroll:this.get("noScroll"),textMessage:this.get("textMessage"),htmlMessage:this.get("message")?this.get("message"):this.get("htmlMessage"),subview:!!this.get("subview"),showBodyLines:this.get("showBodyLines"),hideModalOverlay:this.get("hideModalOverlay"),darkOverlay:this.get("darkOverlay"),showHeader:this.get("showHeader"),showFooter:this.get("showFooter"),buttons:{visible:this.get("showButtons"),action:{visible:this.get("showActionButton"),label:this.get("actionButtonLabel"),disabled:this.get("actionButtonDisabled"),isDangerous:this.get("actionButtonIsDangerous")},cancel:{visible:this.get("showCancelButton"),label:this.get("cancelButtonLabel")}},classList:this.get("classList")},this.get("buttonFlavorText")&&(s.buttons.flavorText={visible:this.get("showButtonFlavorText"),text:this.get("buttonFlavorText")}),this.setContainerHTML(this.templates("fluid-modal")(s)),r.modal.width=this.get("width"),r.modal.minWidth=this.get("minWidth"),r.modal.height=this.get("height"),this.get("navBarView")&&(this.get("navBarView").appContext=t.appContext,this.get("navBarView").initialize().then(function(e){e.on("subviewViewEvent",function(e){e&&e.details&&e.details.length&&(t.get("subview")&&e.details[0]==="navigation"?t.get("subview").fire.apply(t.get("subview"),["parentViewEvent"].concat(e.details)):t.get("subview")&&e.details[0]==="search"&&t.get("subview").fire.apply(t.get("subview"),["parentViewEvent"].concat(e.details)),t.fire.apply(t,e.details))}),t.get("container").one(n.css.navBarContent).appendChild(e.get("container")),t.get("subview")||t.activate()})),this.get("subview")?(this.get("subview").appContext=t.appContext,this.get("subview").set("isActiveViewAgnostic",!0),this.get("subview").initialize().then(function(e){t.on("parentViewEvent",function(t){t&&t.details&&t.details.length&&e.fire.apply(e,["parentViewEvent"].concat(t.details))}),e.on("subviewViewEvent",function(e){e&&e.details&&e.details.length&&(t.get("navBarView")&&e.details[0]==="backToList"&&t.get("navBarView").fire.apply(t.get("navBarView"),["parentViewEvent"].concat(e.details)),t.fire.apply(t,e.details))}),t.get("container").one(n.css.subviewContent).appendChild(e.get("container")),i&&(i.append(t.get("container")),t.reposition()),t.activate()},function(t){e.Flog.error("[fluid-modal-view] Error initializing modal subview: ",t)})):i&&(i.append(this.get("container")),this.reposition())}return this},reposition:function(){var t=this.get("container"),i=t.one(".modal"),s=e.one(e.config.win),o=parseInt(s.get("innerWidth"),10),u=parseInt(s.get("innerHeight"),10),a=r.modal.width?parseInt(r.modal.width,10):parseInt(i.getComputedStyle("width"),10),f,l,c=20,h,p={},d,v,m=i.one(".body"),g=0,y=this.get("showFooter")?parseInt(i.one(".foot").getComputedStyle("height"),10):0,b=0,w=parseInt(m.getComputedStyle("borderTopWidth"),10)+parseInt(m.getComputedStyle("borderBottomWidth"),10),E={};r.modal.height&&(g=parseInt(i.one(".head").getComputedStyle("height"),10),b=r.modal.height,i.get("showFooter")&&(y=parseInt(i.one(".foot").getComputedStyle("height"),10)),r.modal.height+g+y+4*c+w>=u&&(u<=700?b=u-g-y-w:b=u-g-y-4*c-w),i.setStyles({maxHeight:"none"}),this.get("fullWindow")?E.height=b+"px":this.get("maxHeight")&&(E.maxHeight=b+"px"),i.one(n.css.modalContent).setStyles(E)),f=this._getMiddleXPositionOfScreen(o,a),l=parseInt(i.getComputedStyle("height"
),10),d=i.getDOMNode().scrollHeight,v=i.getDOMNode().scrollWidth,h=this._getMiddleYPositionOfScreen(u,l),p={top:h+"px",left:f+"px",width:r.modal.width?a+"px":"",minWidth:r.modal.minWidth?r.modal.minWidth+"px":""},l+2*c>u||d>l+1||a+2*c>o||v>a?(u<=700&&r.modal.height?p.maxHeight=u-10+"px":(p.maxHeight=u-2*c+"px",p.overflow="auto"),p.top=e.DOM.docScrollY()+5+"px",p.maxWidth=o-2*c+"px"):(p.maxHeight="inherit",p.maxWidth="inherit",p.overflow="visible"),i.setStyles(p)},_getMiddleXPositionOfScreen:function(t,n){return Math.round(t/2)-Math.round(n/2)+e.DOM.docScrollX()},_getMiddleYPositionOfScreen:function(t,n){return Math.round(t/2)-Math.round(n/2)+e.DOM.docScrollY()},handleCancel:function(n){e.rapidTracker.beacon(t,"modalCancelClick"),this.fire("cancelClick",n),this.close(n)},handleAction:function(e){this.fire("actionClick",e),this.get("dismissOnActionClick")&&this.close(e)},close:function(t){e.fire("flickr:removeKeyEventScope",this.getKeyEventScope());var n=this.get("container");this.isClosed=!0,e.one("body").removeClass("scroll-fluid-modal"),this.get("subview")&&this.get("subview").destroy(),this.get("navBarView")&&this.get("navBarView").destroy(),n&&n.remove(!0),this.fire("close",t),this.destroy(),e.OverlayManager.ModalOverlay.remove(this)},getKeyEventScope:function(){return this.name+this._yuid},destructor:function(){this.unfreeze(),this.detachAll()}},{ATTRS:{showCancelX:{value:!0},showCancelButton:{value:!0},showBodyLines:{value:!1},showActionButton:{value:!0},hideModalOverlay:{value:!1},darkOverlay:{value:!1},actionButtonLabel:{valueFn:function(){return this.intlMessage({intlName:"common.OK"})}},actionButtonIsDangerous:{value:!1},cancelButtonLabel:{valueFn:function(){return this.intlMessage({intlName:"common.CANCEL"})}},actionButtonDisabled:{value:!1},showButtons:{value:!0},dismissOnOverlayClick:{value:!1},dismissOnActionClick:{value:!0},title:{value:""},htmlTitle:{value:""},navBarView:{value:null},message:{value:null},textMessage:{value:null},htmlMessage:{value:null},width:{value:0},minWidth:{value:0},height:{value:0},fullWindow:{value:!1},subview:{value:null},classList:{value:""},buttonFlavorText:{value:""},showButtonFlavorText:{value:!0},showHeader:{value:!0},showFooter:{value:!0},noScroll:{value:!1},maxHeight:{value:!0}}})},"@VERSION@",{requires:["flickr-view","fluid-css","hermes-template-fluid-modal","fluid-overlay-manager-view","flog"],optionalRequires:["fluid"],langBundles:["common"]});
YUI.add("hermes-template-fluid-share",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){return" disable-sharing"}function h(e,t){var r="",i,s;return r+=' title="',s={hash:{intlName:"share-modal.SHARING_DISABLED"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+'" ',r}function p(e,t){var r="",i;return r+=' title="',(i=n.shareTooltip)?i=i.call(e,{hash:{},data:t}):(i=e.shareTooltip,i=typeof i===f?i.apply(e):i),r+=a(i)+'"',r}function d(e,t){var r="",i,s;r+="\n		<span ",i=n["if"].call(e,e.sharingDisabled,{hash:{},inverse:l.program(5,p,t),fn:l.program(3,h,t),data:t});if(i||i===0)r+=i;return r+=' class="fluid-share-button-label">',s={hash:{intlName:"share-modal.SHARE"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</span>\n	",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=n.helperMissing,a=this.escapeExpression,f="function",l=this;s+='<div class="fluid-share-button ',(o=n.extraShareButtonClassList)?o=o.call(t,{hash:{},data:i}):(o=t.extraShareButtonClassList,o=typeof o===f?o.apply(t):o),s+=a(o),o=n["if"].call(t,t.sharingDisabled,{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;s+='"\n',o=n["if"].call(t,t.sharingDisabled,{hash:{},inverse:l.program(5,p,i),fn:l.program(3,h,i),data:i});if(o||o===0)s+=o;s+=">\n\n	<span ",o=n["if"].call(t,t.sharingDisabled,{hash:{},inverse:l.program(5,p,i),fn:l.program(3,h,i),data:i});if(o||o===0)s+=o;s+=' class="fluid-share-icon ',(o=n.extraShareButtonIconClassList)?o=o.call(t,{hash:{},data:i}):(o=t.extraShareButtonIconClassList,o=typeof o===f?o.apply(t):o),s+=a(o)+'"></span>\n	',o=n["if"].call(t,t.showShareButtonLabel,{hash:{},inverse:l.noop,fn:l.program(7,d,i),data:i});if(o||o===0)s+=o;return s+="\n\n </div>\n\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-share-tumblr-post",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){var r="",i,s;return r+="\n	<strong>",(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e.title,i=typeof i===u?i.apply(e):i),r+=a(i)+' <a href="',(i=n.ownerURL)?i=i.call(e,{hash:{},data:t}):(i=e.ownerURL,i=typeof i===u?i.apply(e):i),r+=a(i)+'">',s={hash:{intlName:"common.BY_USER",user:e.ownerName},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></strong>\n",r}function h(e,t){var r="",i;r+="\n	",i=n["if"].call(e,e.ownerURL,{hash:{},inverse:l.program(6,d,t),fn:l.program(4,p,t),data:t});if(i||i===0)r+=i;return r+="\n",r}function p(e,t){var r="",i;return r+='\n		<strong><a href="',(i=n.ownerURL)?i=i.call(e,{hash:{},data:t}):(i=e.ownerURL,i=typeof i===u?i.apply(e):i),r+=a(i)+'">',(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e.title,i=typeof i===u?i.apply(e):i),r+=a(i)+"</a></strong>\n	",r}function d(e,t){var r="",i;return r+='\n		<strong><a href="',(i=n.linkToShare)?i=i.call(e,{hash:{},data:t}):(i=e.linkToShare,i=typeof i===u?i.apply(e):i),r+=a(i)+'">',(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e.title,i=typeof i===u?i.apply(e):i),r+=a(i)+"</a></strong>\n	",r}function v(e,t){var r="",i,s;return r+="\n	<br /><i>",s={hash:{intlName:"share-modal.VIA_FLICKR"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</i>\n	<br />",s={hash:{},data:t},r+=a((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.description,s):f.call(e,"renderTrustedMarkup",e.description,s)))+"\n",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=n.helperMissing,l=this;o=n["if"].call(t,t.ownerName,{hash:{},inverse:l.program(3,h,i),fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;s+="\n\n",o=n["if"].call(t,t.description,{hash:{},inverse:l.noop,fn:l.program(8,v,i),data:i});if(o||o===0)s+=o;return s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-tumblr-post",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-share-loading-state",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=this.merge(r,e.partials),i=i||{};var s="",o,u=this;s+="<!-- okay, not ideal, but this is just a loading state so we inline some styles -->\n<style>\n.icons-1x-sprite{background:url('/images/../images/icons-1x-s5f9484e8cf.png') no-repeat}.icons-2x-sprite{background:url('/images/../images/icons-2x-s7c34d6f430.png') no-repeat}.books-1x-sprite{background:url('/images/../images/books/books-1x-s6139b456a1.png') no-repeat}.books-2x-sprite{background:url('/images/../images/books/books-2x-s7fd551ad4b.png') no-repeat}.embedr-1x-sprite{background:url('/images/../images/embedr/embedr-1x-s78fee6dbc0.png') no-repeat}.embedr-2x-sprite{background:url('/images/../images/embedr/embedr-2x-sa70b5745c1.png') no-repeat}.scrappy-1x-sprite{background:url('/images/../images/scrappy/scrappy-1x-s2534f3fcd5.png') no-repeat}.scrappy-2x-sprite{background:url('/images/../images/scrappy/scrappy-2x-s48fc148735.png') no-repeat}.badges-1x-sprite{background:url('/images/../images/badges/badges-1x-s62c2236d54.png') no-repeat}.badges-2x-sprite{background:url('/images/../images/badges/badges-2x-s9a94302ec1.png') no-repeat}.wallet-1x-sprite{background:url('/images/../images/wallet/wallet-1x-s642c161a5b.png') no-repeat}.wallet-2x-sprite{background:url('/images/../images/wallet/wallet-2x-sb954dcbc88.png') no-repeat}.general-1x-sprite{background:url('/images/../images/general/general-1x-s1afd66c509.png') no-repeat}.general-2x-sprite{background:url('/images/../images/general/general-2x-s919633f2a8.png') no-repeat}.marketplace-1x-sprite{background:url('/images/../images/marketplace/marketplace-1x-s55ba5752d0.png') no-repeat}.marketplace-2x-sprite{background:url('/images/../images/marketplace/marketplace-2x-s529b40de42.png') no-repeat}.wallart-1x-sprite{background:url('/images/../images/wallart/wallart-1x-s16d0f44d62.png') no-repeat}.wallart-2x-sprite{background:url('/images/../images/wallart/wallart-2x-s4156e49d66.png') no-repeat}.cameraroll-1x-sprite{background:url('/images/../images/cameraroll/cameraroll-1x-sb0eb00865b.png') no-repeat}.cameraroll-2x-sprite{background:url('/images/../images/cameraroll/cameraroll-2x-s14c3067377.png') no-repeat}.groups-1x-sprite{background:url('/images/../images/groups/groups-1x-sc426e8a255.png') no-repeat}.groups-2x-sprite{background:url('/images/../images/groups/groups-2x-sb56ae95889.png') no-repeat}.storefront-1x-sprite{background:url('/images/../images/storefront/storefront-1x-s7ed4af2be2.png') no-repeat}.storefront-2x-sprite{background:url('/images/../images/storefront/storefront-2x-s34622659c6.png') no-repeat}.stats-1x-sprite{background:url('/images/../images/stats/stats-1x-sac7a1b4e9c.png') no-repeat}.stats-2x-sprite{background:url('/images/../images/stats/stats-2x-saf6bac449d.png') no-repeat}@keyframes pinkBall{0%{z-index:1}50%{-webkit-transform:translateX(12px);-moz-transform:translateX(12px);-ms-transform:translateX(12px);-o-transform:translateX(12px);transform:translateX(12px)}}@-moz-keyframes pinkBall{0%{z-index:1}50%{-webkit-transform:translateX(12px);-moz-transform:translateX(12px);-ms-transform:translateX(12px);-o-transform:translateX(12px);transform:translateX(12px)}}@-webkit-keyframes pinkBall{0%{z-index:1}50%{-webkit-transform:translateX(12px);-moz-transform:translateX(12px);-ms-transform:translateX(12px);-o-transform:translateX(12px);transform:translateX(12px)}}@-ms-keyframes pinkBall{0%{z-index:1}50%{-webkit-transform:translateX(12px);-moz-transform:translateX(12px);-ms-transform:translateX(12px);-o-transform:translateX(12px);transform:translateX(12px)}}@-o-keyframes pinkBall{0%{z-index:1}50%{-webkit-transform:translateX(12px);-moz-transform:translateX(12px);-ms-transform:translateX(12px);-o-transform:translateX(12px);transform:translateX(12px)}}@keyframes blueBall{50%{-webkit-transform:translateX(-12px);-moz-transform:translateX(-12px);-ms-transform:translateX(-12px);-o-transform:translateX(-12px);transform:translateX(-12px)}}@-moz-keyframes blueBall{50%{-webkit-transform:translateX(-12px);-moz-transform:translateX(-12px);-ms-transform:translateX(-12px);-o-transform:translateX(-12px);transform:translateX(-12px)}}@-webkit-keyframes blueBall{50%{-webkit-transform:translateX(-12px);-moz-transform:translateX(-12px);-ms-transform:translateX(-12px);-o-transform:translateX(-12px);transform:translateX(-12px)}}@-ms-keyframes blueBall{50%{-webkit-transform:translateX(-12px);-moz-transform:translateX(-12px);-ms-transform:translateX(-12px);-o-transform:translateX(-12px);transform:translateX(-12px)}}@-o-keyframes blueBall{50%{-webkit-transform:translateX(-12px);-moz-transform:translateX(-12px);-ms-transform:translateX(-12px);-o-transform:translateX(-12px);transform:translateX(-12px)}}.fluid .balls{position:relative;width:24px;height:12px;margin:0 auto;display:inline-block}.fluid .balls::before,.fluid .balls::after{position:absolute;top:0;width:12px;height:12px;content:'';border-radius:100%;-webkit-animation:pinkBall 1.6s ease-in-out infinite;-moz-animation:pinkBall 1.6s ease-in-out infinite;-ms-animation:pinkBall 1.6s ease-in-out infinite;-o-animation:pinkBall 1.6s ease-in-out infinite;animation:pinkBall 1.6s ease-in-out infinite}.fluid .balls::before{background:#ff329c;left:0}.fluid .balls::after{-webkit-animation:blueBall 1.6s ease-in-out infinite;-moz-animation:blueBall 1.6s ease-in-out infinite;-ms-animation:blueBall 1.6s ease-in-out infinite;-o-animation:blueBall 1.6s ease-in-out infinite;animation:blueBall 1.6s ease-in-out infinite;background:#0063dc;right:0}#yui3-css-stamp.fluid-balls-css{display:none}\n\n.fluid.sharing-loader .balls {\n	margin: 80px auto;\n	display: block;\n}\n</style>\n\n\n<div class=\"sharing-loader fluid\">\n	",o=u.invokePartial(r["flickr-balls"],"flickr-balls",t,n,r,i);if(o||o===0)s+=o;return s+="\n</div>",s}),r={};e.Array.each(["flickr-balls"],function(t){var n=e.Template.get("hermes/"+
t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-loading-state",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-flickr-balls"]});
YUI.add("hermes-template-fluid-share-panel",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){return" sharing-type-disabled"}function d(e,t){return" sharing-type-enabled"}function v(e,t){var n="",r;return n+=' title="'+l((r=(r=(r=e.networkClasses,r==null||r===!1?r:r.facebook),r==null||r===!1?r:r.canNotShareTitle),typeof r===f?r.apply(e):r))+'"',n}function m(e,t){var n="",r;return n+=' title="'+l((r=(r=(r=e.networkClasses,r==null||r===!1?r:r.tumblr),r==null||r===!1?r:r.canNotShareTitle),typeof r===f?r.apply(e):r))+'"',n}function g(e,t){var n="",r;return n+=' title="'+l((r=(r=(r=e.networkClasses,r==null||r===!1?r:r.twitter),r==null||r===!1?r:r.canNotShareTitle),typeof r===f?r.apply(e):r))+'"',n}function y(e,t){var n="",r;return n+=' title="'+l((r=(r=(r=e.networkClasses,r==null||r===!1?r:r.pinterest),r==null||r===!1?r:r.canNotShareTitle),typeof r===f?r.apply(e):r))+'"',n}function b(e,t){var n="",r;return n+=' title="'+l((r=(r=(r=e.networkClasses,r==null||r===!1?r:r.flickr),r==null||r===!1?r:r.canNotShareTitle),typeof r===f?r.apply(e):r))+'"',n}function w(e,t){return" single-link"}function E(e,t){var r="",i,s,o;r+="\n							",o={hash:{},inverse:h.noop,fn:h.program(18,S,t),data:t},s=(i=n.isFlipped||e.isFlipped,i?i.call(e,e.flippers,"enable-embedr-in-share",o):c.call(e,"isFlipped",e.flippers,"enable-embedr-in-share",o));if(s||s===0)r+=s;r+="\n							",o={hash:{},inverse:h.noop,fn:h.program(21,T,t),data:t},s=(i=n.isNotFlipped||e.isNotFlipped,i?i.call(e,e.flippers,"enable-embedr-in-share",o):c.call(e,"isNotFlipped",e.flippers,"enable-embedr-in-share",o));if(s||s===0)r+=s;r+="\n\n							",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.bbCode),{hash:{},inverse:h.noop,fn:h.program(26,k,t),data:t});if(s||s===0)r+=s;return r+="\n						",r}function S(e,t){var r="",i,s;r+="\n								",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.embedr),{hash:{},inverse:h.noop,fn:h.program(19,x,t),data:t});if(s||s===0)r+=s;return r+="\n							",r}function x(e,t){var r="",i,s;return r+='\n									<span class="link-type-button embed-type-button">',s={hash:{intlName:"share-modal.EMBED"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):c.call(e,"intlHTMLMessage",s)))+"</span>\n								",r}function T(e,t){var r="",i,s;r+="\n								",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.embedr),{hash:{},inverse:h.noop,fn:h.program(22,N,t),data:t});if(s||s===0)r+=s;r+="\n\n								",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.iframe),{hash:{},inverse:h.noop,fn:h.program(24,C,t),data:t});if(s||s===0)r+=s;return r+="\n							",r}function N(e,t){return'\n									<span class="link-type-button embed-type-button">HTML</span>\n								'}function C(e,t){return'\n									<span class="link-type-button iframe-type-button">IFRAME</span>\n								'}function k(e,t){var r="",i,s;return r+='\n								<span class="link-type-button bbcode-type-button">',s={hash:{intlName:"share-modal.BBCODE"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):c.call(e,"intlHTMLMessage",s)))+"</span>\n							",r}function L(e,t){return" single-highlight"}function A(e,t){var r="",i;r+='\n						<div class="grab-link-only grab-link">\n\n							',i=n["if"].call(e,e.canHaveGuestpass,{hash:{},inverse:h.noop,fn:h.program(31,O,t),data:t});if(i||i===0)r+=i;r+='\n\n							<input readonly type="text" class="grab-link-text-field" value="',(i=n.grabLink)?i=i.call(e,{hash:{},data:t}):(i=e.grabLink,i=typeof i===f?i.apply(e):i),r+=l(i)+'">\n\n							<div class="grab-link-loader ',i=n.unless.call(e,e.canHaveGuestpass,{hash:{},inverse:h.noop,fn:h.program(34,_,t),data:t});if(i||i===0)r+=i;r+=" ",i=n.unless.call(e,e.choiceOfPermission,{hash:{},inverse:h.noop,fn:h.program(36,D,t),data:t});if(i||i===0)r+=i;r+='"><div class="balls"></div></div>\n\n							<div class="grab-link-privacy-reminder hide-reminder',i=n["if"].call(e,e.canHaveGuestpass,{hash:{},inverse:h.noop,fn:h.program(38,P,t),data:t});if(i||i===0)r+=i;return r+='">',(i=n.privacyWarningString)?i=i.call(e,{hash:{},data:t}):(i=e.privacyWarningString,i=typeof i===f?i.apply(e):i),r+=l(i)+"</div>\n\n						</div>\n					",r}function O(e,t){var r="",i;r+="\n								",i=n["if"].call(e,e.choiceOfPermission,{hash:{},inverse:h.noop,fn:h.program(32,M,t),data:t});if(i||i===0)r+=i;return r+="\n							",r}function M(e,t){var r="",i;return r+='\n								<div class="grab-link-permission-field grab-link-field">\n									<span class="grab-link-permission-label">',(i=n.grabLinkDefaultPermission)?i=i.call(e,{hash:{},data:t}):(i=e.grabLinkDefaultPermission,i=typeof i===f?i.apply(e):i),r+=l(i)+'</span>\n									<span class="dropdown-arrow"></span>\n								</div>\n								',r}function _(e,t){return" no-permission-loader"}function D(e,t){return"no-permission-loader"}function P(e,t){return" with-guestpasses "}function H(e,t){var r="",i,s;r+='\n						<div class="sliding-frame">\n\n							<div class="link-type-content grab-link">\n\n								',i=n["if"].call(e,e.canHaveGuestpass,{hash:{},inverse:h.noop,fn:h.program(41,B,t),data:t});if(i||i===0)r+=i;r+='\n\n								<input readonly type="text" class="grab-link-text-field" value="',(i=n.grabLink)?i=i.call(e,{hash:{},data:t}):(i=e.grabLink,i=typeof i===f?i.apply(e):i),r+=l(i)+'">\n\n								<div class="grab-link-loader ',i=n.unless.call(e,e.choiceOfPermission,{hash:{},inverse:h.noop,fn:h.program(36,D,t),data:t});if(i||i===0)r+=i;r+='"><div class="balls"></div></div>\n\n								<div class="grab-link-privacy-reminder ',i=n.unless.call(e,e.canHaveGuestpass,{hash:{},inverse:h.program(38,P,t),fn:h.program(44,F,t),data:t});if(i||i===0)r+=i;r+='">',(i=n.privacyWarningString)?i=i.call(e,{hash:{},data:t}):(i=e.privacyWarningString,i=typeof i===f?i.apply(e):i),r+=l(i)+"</div>\n\n							</div>\n\n							",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.embedr),{hash:{},inverse:h.noop,fn:h.program(46,I,t),data:t});if(s||s===0)r+=s;r+="\n\n							",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||
i===!1?i:i.iframe),{hash:{},inverse:h.noop,fn:h.program(49,R,t),data:t});if(s||s===0)r+=s;r+="\n\n							",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.bbCode),{hash:{},inverse:h.noop,fn:h.program(51,U,t),data:t});if(s||s===0)r+=s;return r+="\n						</div>\n\n					",r}function B(e,t){var r="",i;r+="\n									",i=n["if"].call(e,e.choiceOfPermission,{hash:{},inverse:h.noop,fn:h.program(42,j,t),data:t});if(i||i===0)r+=i;return r+="\n								",r}function j(e,t){var r="",i;return r+='\n									<div class="grab-link-permission-field grab-link-field">\n										<span class="grab-link-permission-label">',(i=n.grabLinkDefaultPermission)?i=i.call(e,{hash:{},data:t}):(i=e.grabLinkDefaultPermission,i=typeof i===f?i.apply(e):i),r+=l(i)+'</span>\n										<span class="dropdown-arrow"></span>\n									</div>\n									',r}function F(e,t){return" hide-reminder"}function I(e,t){var r="",i,s,o;r+='\n								<div class="link-type-content html-embed">\n									<div class="embed-code-size-field embed-size-field">\n										<span class="embed-code-label">\n										',o={hash:{},data:t},r+=l((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.defaultSizeStr,o):c.call(e,"renderTrustedMarkup",e.defaultSizeStr,o)))+'\n										</span>\n										<span class="dropdown-arrow"></span>\n									</div>\n									<input readonly type="text" class="embed-code-text-field" value="',(s=n.defaultEmbedrCode)?s=s.call(e,{hash:{},data:t}):(s=e.defaultEmbedrCode,s=typeof s===f?s.apply(e):s),r+=l(s)+'">\n									',o={hash:{},inverse:h.noop,fn:h.program(47,q,t),data:t},s=(i=n.isFlipped||e.isFlipped,i?i.call(e,e.flippers,"enable-embedr-display-options",o):c.call(e,"isFlipped",e.flippers,"enable-embedr-display-options",o));if(s||s===0)r+=s;return r+="\n\n								</div>\n							",r}function q(e,t){var r="",i,s;return r+='\n									<div class="embed-options">\n 										<div class="radio large">\n											<input type="checkbox" data-setting="header" id="embedr-option-header" name="radio-large" checked="true">\n											<label for="embedr-option-header">\n												<div class="square"></div>\n												<span>',s={hash:{intlName:"share-modal.EMBEDR_OPTION_HEADER"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):c.call(e,"intlHTMLMessage",s)))+'</span>\n											</label>\n										</div>\n\n										<div class="radio large">\n											<input type="checkbox" data-setting="footer" id="embedr-option-footer" name="radio-large" checked="true">\n											<label for="embedr-option-footer">\n												<div class="square"></div>\n												<span>',s={hash:{intlName:"share-modal.EMBEDR_OPTION_FOOTER"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):c.call(e,"intlHTMLMessage",s)))+'</span>\n											</label>\n										</div>\n\n										<div class="radio large">\n											<input type="checkbox" data-setting="truncate" id="embedr-option-truncate" name="radio-large" checked="true">\n											<label for="embedr-option-truncate">\n												<div class="square"></div>\n												<span>',s={hash:{intlName:"share-modal.EMBEDR_OPTION_TRUNCATE"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):c.call(e,"intlHTMLMessage",s)))+'</span>\n											</label>\n										</div>\n\n										<div class="radio large">\n											<input type="checkbox" data-setting="context" id="embedr-option-context" name="radio-large">\n											<label for="embedr-option-context">\n												<div class="square"></div>\n												<span>',s={hash:{intlName:"share-modal.EMBEDR_OPTION_SLIDESHOW"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):c.call(e,"intlHTMLMessage",s)))+"</span>\n											</label>\n										</div>\n									</div>\n									",r}function R(e,t){var r="",i,s,o;return r+='\n								<div class="link-type-content html-iframe-embed">\n									<div class="iframe-code-size-field embed-size-field">\n										<span class="embed-code-label">\n										',o={hash:{},data:t},r+=l((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.defaultIframeSizeStr,o):c.call(e,"renderTrustedMarkup",e.defaultIframeSizeStr,o)))+'\n										</span>\n										<span class="dropdown-arrow"></span>\n									</div>\n									<input readonly type="text" class="iframe-code-text-field" value="',(s=n.defaultIframeCode)?s=s.call(e,{hash:{},data:t}):(s=e.defaultIframeCode,s=typeof s===f?s.apply(e):s),r+=l(s)+'">\n								</div>\n							',r}function U(e,t){var r="",i,s,o;return r+='\n								<div class="link-type-content html-bb-embed">\n									<div class="bb-code-size-field embed-size-field">\n										<span class="embed-code-label">\n											',o={hash:{},data:t},r+=l((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.defaultBBCodeSizeStr,o):c.call(e,"renderTrustedMarkup",e.defaultBBCodeSizeStr,o)))+'\n										</span>\n										<span class="dropdown-arrow"></span>\n									</div>\n									<input readonly type="text" class="bb-code-text-field" value="',(s=n.defaultBBCode)?s=s.call(e,{hash:{},data:t}):(s=e.defaultBBCode,s=typeof s===f?s.apply(e):s),r+=l(s)+'">\n								</div>\n							',r}function z(e,t){return" single-link-field"}function W(e,t){var r="",i;return r+='\n				<div class="mail-perm-field">\n					<span class="mail-permission-label">',(i=n.grabLinkDefaultPermission)?i=i.call(e,{hash:{},data:t}):(i=e.grabLinkDefaultPermission,i=typeof i===f?i.apply(e):i),r+=l(i)+'</span>\n					<span class="dropdown-arrow"></span>\n				</div>\n				',r}function X(e,t){var r="",i;r+="\n					",i=n["if"].call(e,e.nonPublicWarning,{hash:{},inverse:h.noop,fn:h.program(58,V,t),data:t});if(i||i===0)r+=i;return r+="\n				",r}function V(e,t){var r="",i,s;return r+='\n						<div class="tertiary non-public-warning">',s={hash:{},data:t},r+=l((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.nonPublicWarning,s):c.call(e,"renderTrustedMarkup",e.nonPublicWarning,s)))+"</div>\n					",r}function $(e,t){return"make-room-for-dropdown"}function J
(e,t){var r;return r=n["if"].call(e,e.nonPublicWarning,{hash:{},inverse:h.noop,fn:h.program(63,K,t),data:t}),r||r===0?r:""}function K(e,t){return"make-room-for-warning"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+='<div class="share-panel-body">\n	<div class="share-panels">\n\n		<div class="main-sharing-panel share-panel">\n			<div class="network-buttons">\n				<span class="share-link '+l((o=(o=(o=t.networkClasses,o==null||o===!1?o:o.facebook),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+"\n\n				",u=n.unless.call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.facebook),o==null||o===!1?o:o.canShare),{hash:{},inverse:h.program(3,d,i),fn:h.program(1,p,i),data:i});if(u||u===0)s+=u;s+='"\n\n				',u=n["if"].call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.facebook),o==null||o===!1?o:o.canNotShareTitle),{hash:{},inverse:h.noop,fn:h.program(5,v,i),data:i});if(u||u===0)s+=u;s+='>\n\n					<span class="share-link-icon '+l((o=(o=(o=t.networkClasses,o==null||o===!1?o:o.facebook),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+'-icon"></span>\n					<span class="share-link-label">',a={hash:{intlName:"share-modal.FACEBOOK"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+'</span>\n				</span>\n				<span class="share-link '+l((o=(o=(o=t.networkClasses,o==null||o===!1?o:o.tumblr),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+"\n\n				",u=n.unless.call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.tumblr),o==null||o===!1?o:o.canShare),{hash:{},inverse:h.program(3,d,i),fn:h.program(1,p,i),data:i});if(u||u===0)s+=u;s+='"\n\n				',u=n["if"].call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.tumblr),o==null||o===!1?o:o.canNotShareTitle),{hash:{},inverse:h.noop,fn:h.program(7,m,i),data:i});if(u||u===0)s+=u;s+='>\n\n					<span class="share-link-icon '+l((o=(o=(o=t.networkClasses,o==null||o===!1?o:o.tumblr),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+'-icon"></span>\n					<span class="share-link-label">',a={hash:{intlName:"share-modal.TUMBLR"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+'</span>\n				</span>\n				<span class="share-link '+l((o=(o=(o=t.networkClasses,o==null||o===!1?o:o.twitter),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+"\n\n				",u=n.unless.call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.twitter),o==null||o===!1?o:o.canShare),{hash:{},inverse:h.program(3,d,i),fn:h.program(1,p,i),data:i});if(u||u===0)s+=u;s+='"\n\n				',u=n["if"].call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.twitter),o==null||o===!1?o:o.canNotShareTitle),{hash:{},inverse:h.noop,fn:h.program(9,g,i),data:i});if(u||u===0)s+=u;s+='>\n\n					<span class="share-link-icon '+l((o=(o=(o=t.networkClasses,o==null||o===!1?o:o.twitter),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+'-icon"></span>\n					<span class="share-link-label">',a={hash:{intlName:"share-modal.TWITTER"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+'</span>\n				</span>\n				<span class="share-link '+l((o=(o=(o=t.networkClasses,o==null||o===!1?o:o.pinterest),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+"\n\n				",u=n.unless.call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.pinterest),o==null||o===!1?o:o.canShare),{hash:{},inverse:h.program(3,d,i),fn:h.program(1,p,i),data:i});if(u||u===0)s+=u;s+='"\n\n				',u=n["if"].call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.pinterest),o==null||o===!1?o:o.canNotShareTitle),{hash:{},inverse:h.noop,fn:h.program(11,y,i),data:i});if(u||u===0)s+=u;s+='>\n\n					<span class="share-link-icon '+l((o=(o=(o=t.networkClasses,o==null||o===!1?o:o.pinterest),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+'-icon"></span>\n					<span class="share-link-label">',a={hash:{intlName:"share-modal.PINTEREST"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+'</span>\n				</span>\n				<span class="share-link '+l((o=(o=(o=t.networkClasses,o==null||o===!1?o:o.flickr),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+"\n\n				",u=n.unless.call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.flickr),o==null||o===!1?o:o.canShare),{hash:{},inverse:h.program(3,d,i),fn:h.program(1,p,i),data:i});if(u||u===0)s+=u;s+='"\n\n				',u=n["if"].call(t,(o=(o=t.networkClasses,o==null||o===!1?o:o.flickr),o==null||o===!1?o:o.canNotShareTitle),{hash:{},inverse:h.noop,fn:h.program(13,b,i),data:i});if(u||u===0)s+=u;s+='>\n\n					<span class="share-link-icon '+l((o=(o=(o=t.networkClasses,o==null||o===!1?o:o.flickr),o==null||o===!1?o:o.className),typeof o===f?o.apply(t):o))+'-icon"></span>\n					<span class="share-link-label">',a={hash:{intlName:"share-modal.MAIL"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+'</span>\n				</span>\n			</div>\n\n			<div class="share-link-types first-stop">\n\n					<div class="link-type-buttons">\n\n						<span class="link-type-button link-grab-type-button ',u=n["if"].call(t,t.hideButtons,{hash:{},inverse:h.noop,fn:h.program(15,w,i),data:i});if(u||u===0)s+=u;s+='">',a={hash:{intlName:"share-modal.GRAB_LINK"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+"</span>\n\n						",u=n.unless.call(t,t.hideButtons,{hash:{},inverse:h.noop,fn:h.program(17,E,i),data:i});if(u||u===0)s+=u;s+='\n\n						<span class="link-type-highlight ',u=n["if"].call(t,t.hideButtons,{hash:{},inverse:h.noop,fn:h.program(28,L,i),data:i});if(u||u===0)s+=u;s+='"></span>\n\n					</div>\n\n\n				<div class="link-type-contents">\n					',u=n["if"].call(t,t.hideButtons,{hash:{},inverse:h.program(40,H,i),fn:h.program(30,A,i),data:i});if(u||u===0)s+=u;s+='\n\n				</div>\n			</div>\n\n			<div class="link-instructions ',u=n["if"].call(t,t.moveInstructionsUp,{hash:{},
inverse:h.noop,fn:h.program(53,z,i),data:i});if(u||u===0)s+=u;s+='">\n				',(u=n.copyMessage)?u=u.call(t,{hash:{},data:i}):(u=t.copyMessage,u=typeof u===f?u.apply(t):u),s+=l(u)+'\n			</div>\n			<button class="done-sharing mini">',a={hash:{intlName:"common.DONE"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+'</button>\n		</div>\n\n\n		<div class="email-sharing-panel share-panel">\n\n			<div class="message-form">\n				<div class="fake-input">\n					<input type="text" class="email-recipient-text-field" placeholder="',a={hash:{intlName:"share-modal.SCREEN_NAME_OR_EMAIL"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+'" data-field="recipient">\n				</div>\n\n				',u=n["if"].call(t,t.showMailPerms,{hash:{},inverse:h.program(57,X,i),fn:h.program(55,W,i),data:i});if(u||u===0)s+=u;s+='\n\n				<textarea class="email-message-text-field ',u=n["if"].call(t,t.showMailPerms,{hash:{},inverse:h.program(62,J,i),fn:h.program(60,$,i),data:i});if(u||u===0)s+=u;return s+='" placeholder="',a={hash:{intlName:"share-modal.INCLUDE_A_MESSAGE"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+'"></textarea>\n			</div>\n\n			<button disabled class="share-by-email mini">',a={hash:{intlName:"share-modal.FLICKR_SHARE"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+'</button>\n			<button class="leave-email-sharing mini alt">',a={hash:{intlName:"common.BACK"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):c.call(t,"intlHTMLMessage",a)))+"</button>\n\n		</div>\n\n\n	</div>\n</div>",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-panel",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-droparound",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){return" html"}function h(e,t){return" subview-droparound"}function p(e,t){return" menu"}function d(e,t){return" auto-size"}function v(e,t){var r="",i;return r+="max-height: ",(i=n.staticHeight)?i=i.call(e,{hash:{},data:t}):(i=e.staticHeight,i=typeof i===u?i.apply(e):i),r+=a(i)+"px; min-height: ",(i=n.staticHeight)?i=i.call(e,{hash:{},data:t}):(i=e.staticHeight,i=typeof i===u?i.apply(e):i),r+=a(i)+"px; ",r}function m(e,t){var r="",i;return r+="width: ",(i=n.staticWidth)?i=i.call(e,{hash:{},data:t}):(i=e.staticWidth,i=typeof i===u?i.apply(e):i),r+=a(i)+"px;",r}function g(e,t){return"position: fixed;"}function y(e,t){return"hide-head"}function b(e,t){var r="",i;r+='\n			<div class="content text-only',i=n["if"].call(e,e.autoSizeToContent,{hash:{},inverse:f.noop,fn:f.program(7,d,t),data:t});if(i||i===0)r+=i;return r+='">\n				',(i=n.textMessage)?i=i.call(e,{hash:{},data:t}):(i=e.textMessage,i=typeof i===u?i.apply(e):i),r+=a(i)+"\n			</div>\n		",r}function w(e,t){var r="",i,s;r+='\n			<div class="content html-only',i=n["if"].call(e,e.autoSizeToContent,{hash:{},inverse:f.noop,fn:f.program(7,d,t),data:t});if(i||i===0)r+=i;return r+='">\n				',s={hash:{},data:t},r+=a((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.htmlMessage,s):l.call(e,"renderTrustedMarkup",e.htmlMessage,s)))+"\n			</div>\n		",r}function E(e,t){return'\n			<div class="content subview"></div>\n		'}function S(e,t){var r="",i;r+='\n			<div class="content menu">\n				<ul role="menu">\n					',i=n.each.call(e,e.menuItems,{hash:{},inverse:f.noop,fn:f.program(24,x,t),data:t});if(i||i===0)r+=i;return r+="\n				</ul>\n			</div>\n		",r}function x(e,t){var r="",i;r+='\n					<li role="menuitem">',i=n["if"].call(e,e.href,{hash:{},inverse:f.noop,fn:f.program(25,T,t),data:t});if(i||i===0)r+=i;(i=n.text)?i=i.call(e,{hash:{},data:t}):(i=e.text,i=typeof i===u?i.apply(e):i),r+=a(i),i=n["if"].call(e,e.href,{hash:{},inverse:f.noop,fn:f.program(28,C,t),data:t});if(i||i===0)r+=i;return r+="</li>\n					",r}function T(e,t){var r="",i;r+='<a href="',(i=n.href)?i=i.call(e,{hash:{},data:t}):(i=e.href,i=typeof i===u?i.apply(e):i),r+=a(i)+'"',i=n["if"].call(e,e.className,{hash:{},inverse:f.noop,fn:f.program(26,N,t),data:t});if(i||i===0)r+=i;return r+=">",r}function N(e,t){var r="",i;return r+=' class="',(i=n.className)?i=i.call(e,{hash:{},data:t}):(i=e.className,i=typeof i===u?i.apply(e):i),r+=a(i)+'"',r}function C(e,t){return"</a>"}function k(e,t){return"hide-foot"}function L(e,t){return'\n		<div class="droparrow up"></div>\n	'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=this,l=n.helperMissing;s+='<div class="droparound',o=n["if"].call(t,t.htmlMessage,{hash:{},inverse:f.noop,fn:f.program(1,c,i),data:i});if(o||o===0)s+=o;o=n["if"].call(t,t.subview,{hash:{},inverse:f.noop,fn:f.program(3,h,i),data:i});if(o||o===0)s+=o;o=n["if"].call(t,t.menuItems,{hash:{},inverse:f.noop,fn:f.program(5,p,i),data:i});if(o||o===0)s+=o;o=n["if"].call(t,t.autoSizeToContent,{hash:{},inverse:f.noop,fn:f.program(7,d,i),data:i});if(o||o===0)s+=o;s+=" ",(o=n.classList)?o=o.call(t,{hash:{},data:i}):(o=t.classList,o=typeof o===u?o.apply(t):o),s+=a(o)+'"\nstyle="',o=n["if"].call(t,t.staticHeight,{hash:{},inverse:f.noop,fn:f.program(9,v,i),data:i});if(o||o===0)s+=o;s+="\n",o=n["if"].call(t,t.staticWidth,{hash:{},inverse:f.noop,fn:f.program(11,m,i),data:i});if(o||o===0)s+=o;s+="\n",o=n["if"].call(t,t.positionFixed,{hash:{},inverse:f.noop,fn:f.program(13,g,i),data:i});if(o||o===0)s+=o;s+='">\n	<div class="head ',o=n.unless.call(t,t.headContent,{hash:{},inverse:f.noop,fn:f.program(15,y,i),data:i});if(o||o===0)s+=o;s+='">\n		',(o=n.headContent)?o=o.call(t,{hash:{},data:i}):(o=t.headContent,o=typeof o===u?o.apply(t):o),s+=a(o)+'\n	</div>\n	<div class="body">\n		',o=n["if"].call(t,t.textMessage,{hash:{},inverse:f.noop,fn:f.program(17,b,i),data:i});if(o||o===0)s+=o;s+="\n		",o=n["if"].call(t,t.htmlMessage,{hash:{},inverse:f.noop,fn:f.program(19,w,i),data:i});if(o||o===0)s+=o;s+="\n		",o=n["if"].call(t,t.subview,{hash:{},inverse:f.noop,fn:f.program(21,E,i),data:i});if(o||o===0)s+=o;s+="\n		",o=n["if"].call(t,t.menuItems,{hash:{},inverse:f.noop,fn:f.program(23,S,i),data:i});if(o||o===0)s+=o;s+='\n	</div>\n	<div class="foot ',o=n.unless.call(t,t.footContent,{hash:{},inverse:f.noop,fn:f.program(30,k,i),data:i});if(o||o===0)s+=o;s+='">\n		',(o=n.footContent)?o=o.call(t,{hash:{},data:i}):(o=t.footContent,o=typeof o===u?o.apply(t):o),s+=a(o)+"\n	</div>\n	",o=n["if"].call(t,t.showDropArrow,{hash:{},inverse:f.noop,fn:f.program(32,L,i),data:i});if(o||o===0)s+=o;return s+="\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-droparound",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("fluid-droparound-view",function(e){"use strict";var t,n;t={css:{destinationContainer:"body",subviewContent:".content.subview",menuContent:".content.menu",droparoundContainer:".droparound",droparoundContent:".body .content",droparrow:".droparrow"},options:{}},n={supportsTransform:!1,droparound:{height:0,width:0}},e.namespace("Views").FluidDroparound=e.FlickrView.create(this.name,e.FlickrView,[],{initializer:function(e){this.set("isActiveViewAgnostic",!0)},buildContainer:function(){return!this.get("textMessage")&&!this.get("htmlMessage")&&!this.get("subview")&&!this.get("menuItems")?(this.appContext.warn("FluidDroparoundView requires a `textMessage`, `htmlMessage`, `subview`, or `menuItems`."),this):(this.get("menuItems")&&this.set("menuItems",this.get("menuItems").filter(function(e){return!e.hidden})),this.setContainerHTML(this.templates("fluid-droparound")({textMessage:this.get("textMessage"),htmlMessage:this.get("message")?this.get("message"):this.get("htmlMessage"),subview:!!this.get("subview"),menuItems:this.get("menuItems"),showDropArrow:this.get("showDropArrow"),hideModalOverlay:this.get("hideModalOverlay"),hideDroparoundOverlay:this.get("hideDroparoundOverlay"),classList:this.get("classList"),footContent:this.get("footContent"),headContent:this.get("headContent"),staticWidth:this.get("width"),staticHeight:this.get("height"),positionFixed:this.get("positionFixed"),autoSizeToContent:this.get("autoSizeToContent")})),this.appendAndPosition(),this)},activate:function(){var n=this.get("container"),r=this;return e.OverlayManager.DroparoundOverlay.add(this),this.registerEventHandler(e.on("droparound:reposition",e.bind(this.anchorPositionChange,this))),this.registerEventHandler(e.on("history:change",function(e){if(e.src==="popstate"&&e.prevVal&&e.newVal)if(e.prevVal.flickr&&e.prevVal.flickr.referrer||e.newVal.flickr&&e.newVal.flickr.referrer)return;r.close(e)})),this.get("subview")&&this.loadSubview(),this.get("menuItems")&&this.registerEventHandler(n.one(t.css.menuContent).delegate("click",this.onMenuItemClick.bind(this),"li")),this.get("observePageResize")&&this.observePageResize(),this.get("closeOnScroll")&&this.observePageScroll(),this.fire("activated"),this},loadSubview:function(){var n,r,i=!1,s=this.get("subview"),o=this;n=this.get("container").one(t.css.subviewContent),n.appendChild(e.Node.create(this.templates("flickr-balls")({})).addClass("flickr-balls")),r=setTimeout(function(){i=!0},40),this.loading=!0,s.appContext=o.appContext,s.set("isActiveViewAgnostic",!0),s.initialize().then(function(e){clearTimeout(r),i&&(e.get("container").addClass("load-transition"),setTimeout(function(){e.get("container").removeClass("load-transition")},1)),o.onSubviewInitialized(e)})},onSubviewInitialized:function(n){var r=this,i=this.get("container").one(t.css.subviewContent);if(!this.loading)return;this.loading=!1,i.one(".flickr-balls").remove(!0),i.appendChild(n.get("container")),n.on("subviewViewEvent",function(e){e&&e.details&&e.details.length&&r.fire.apply(r,e.details)}),n.normalizedActivate(),n.recursivelyActivateSubviews(),r.appendAndPosition(),r.registerEventHandler(r.get("subview").on("actionClick",e.bind(r.handleAction,r)))},onMenuItemClick:function(e){var n,r;n=e.target.ancestor("li",!0),n&&(r=this.get("container").one(t.css.menuContent).all("li").indexOf(n),r!==-1&&this.fire("selected",{menuItemIndex:r,menuItem:this.get("menuItems")[r]}))},appendAndPosition:function(){var r=e.one(t.css.destinationContainer),i=this.get("container").one(t.css.droparoundContainer);r&&(r.append(this.get("container")),n.droparound.width=this.get("width")||i.getComputedStyle("width"),n.droparound.height=this.get("height")||i.getComputedStyle("height"),this.repositionToElement(this.get("anchorElement")))},updateTextMessage:function(e){e&&e!==""&&(this.set("textMessage",e),this.buildContainer())},updateHTMLMessage:function(e){e&&e!==""&&(this.set("htmlMessage",e),this.buildContainer())},anchorPositionChange:function(){this.repositionToElement(this.get("anchorElement"))},observePageResize:function(){var t=this;this.registerEventHandler(e.globalEvents.subscribe("window:resize",function(n){e.fire("droparound:reposition"),t.get("closeOnResize")&&t.handleClose(n)}))},observePageScroll:function(){var t=YUI.Env.isServer?0:e.config.win.pageYOffset,n=this;this.get("startingScrollPoint")||this.set("startingScrollPoint",t),this.registerEventHandler(e.globalEvents.subscribe("window:scroll",n.handleScroll.bind(n)))},handleScroll:function(t){var n,r=this.get("startingScrollPoint");r?(n=e.config.win.pageYOffset,r+this.get("closeOnScrollDistance")<n&&this.handleClose(t)):this.set("startingScrollPoint",e.config.win.pageYOffset)},repositionToElement:function(r){var i=this.get("container"),s=e.one("body"),o=i.one(".droparound"),u=o.one(t.css.droparrow),a=r.getXY(),f=this.get("mirrorArrowAdjustment"),l=s.get("offsetWidth"),c=this.get("showDropArrow"),h=this.get("anchorOffsetVertical"),p=this.get("anchorOffsetHorizontal"),d=this.get("anchorPositionOffset"),v=this.get("minVerticalSpace"),m=o.get("offsetHeight"),g=o.get("offsetWidth"),y=parseInt(r.getComputedStyle("width"),10)||r.get("offsetWidth"),b=parseInt(r.getComputedStyle("height"),10)||r.get("offsetHeight"),w=this.get("dropdownArrowWidth"),E=this.get("dropdownArrowHeight"),S=n.droparound.width?parseInt(n.droparound.width,10):parseInt(o.getComputedStyle("width"),10),x=n.droparound.height?parseInt(n.droparound.height,10):parseInt(o.getComputedStyle("height"),10),T=o.one(t.css.droparoundContent),N=this.get("minHorizontalSpace")+Math.max(m,x),C=l-Math.max(g,S)-d-N,k=r.getDOMNode().getBoundingClientRect(),L,A,O,M,_,D,P,H,B,j=this.get("preferLeft"),F=this.get("preferTop"),I=this.get("preferBottom"),q=0,R=this.appContext.viewportData.getHeight();y||(y=0),b||(b=0),L=Math.ceil((y-w)/2),M=S||g,_=x||m,A=a[1]-x-h,this.get("horizCenterToAnchor")?(O=a[0]+y/2-M/2,q=M/2-w/2):(O=a[0]-p,q=L+f+p),this.get("preferredSide")?this.get("preferredSide")==="left-middle"?(A=a[1]+Math.round(y/2)-h,O=
a[0]+y+L+f+p+E,u.removeClass("down").addClass("left").setStyles({left:L+f-Math.round(E/2)+"px",top:(_-E)/2+"px"})):this.get("preferredSide")==="bottom-middle"&&(A=a[1]+Math.round(y/2)-h,O=a[0]+y+L+f+p+E,u.removeClass("down").addClass("up").setStyles({left:(M-w)/2-L+f-Math.round(w/2)+"px",top:_+"px"})):(P=A<v||k.top-x-h<v,H=O>C,B=k.top+k.height+x+h>R,!F&&P||F&&!P||I&&!B?(A=a[1]+b+h,c&&u.removeClass("up").addClass("down").setStyle("left",q+"px")):c&&u.removeClass("down").addClass("up").setStyle("left",q+"px"),this.get("forceLeft")||!j&&H||j&&!H?a[0]+y+p>l?(O=a[0]-S,c&&u.addClass("right").setStyle("left","auto").setStyle("right",L+y+"px")):(O=a[0]-S+y+p,c&&u.addClass("right").setStyle("left","auto").setStyle("right",L+p+"px")):c&&u.removeClass("right").setStyle("right","auto").setStyle("left",q+"px")),o.setXY([O,A]),!this.get("menuItems")&&!this.get("autoSizeToContent")&&(D={width:M+"px",height:_+"px"},T.setStyles(D))},handleClose:function(e){this.close()},handleAction:function(e){this.fire("actionClick",e),this.get("dismissOnActionClick")&&this.close(e)},show:function(){var e=!this.isActivated,t=this;return this.initialize().then(function(){t.isClosed=!1,e||t.activate()}),this},close:function(){var t=this.get("container");this.loading=!1,this.isClosed=!0,this.fire("closeDroparound"),this.destroy(),this.get("subview")&&this.get("subview").destroy(),t&&t.remove(!0),e.OverlayManager.DroparoundOverlay.remove(this)},destructor:function(){this.detachAll()}},{ATTRS:{dismissOnOverlayClick:{value:!0,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},dismissOnActionClick:{value:!0,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},hideModalOverlay:{value:!0,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},invisibleOverlay:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},preferredSide:{value:null},message:{value:null},textMessage:{value:null},htmlMessage:{value:null},footContent:{value:null},headContent:{value:null},width:{value:0,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},height:{value:0,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},subview:{value:null},menuItems:{value:null},classList:{value:"",validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t,n){return e.AttributeHelpers.coerceString(t)}},anchorElement:{value:null},showDropArrow:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},anchorOffsetVertical:{value:15,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},anchorOffsetHorizontal:{value:5,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},contentPadding:{value:12,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},minVerticalSpace:{value:60,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},minHorizontalSpace:{value:60,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},dropdownArrowWidth:{value:21,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},dropdownArrowHeight:{value:11},anchorPositionOffset:{value:15,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},observePageResize:{value:!0,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},preferLeft:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},preferTop:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},preferBottom:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},mirrorArrowAdjustment:{value:0,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},positionFixed:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},closeOnScroll:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},closeOnScrollDistance:{value:40,validator:function(t,n){return e.AttributeHelpers.validateInteger(t)},setter:function(t,n){return e.AttributeHelpers.coerceInteger(t)}},closeOnResize:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},overlayClassList:{value:"",validator:function(t,n){return e.AttributeHelpers.validateString(t)},setter:function(t,n){return e.AttributeHelpers.coerceString(t)}},forceLeft:{value:null},autoSizeToContent:{value:!1,validator:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}},horizCenterToAnchor:{value:!1,validator
:function(t,n){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,n){return e.AttributeHelpers.coerceBoolean(t)}}}})},"@VERSION@",{requires:["flickr-view","fluid-css","hermes-template-fluid-droparound","fluid-balls-css","hermes-template-flickr-balls","fluid-overlay-manager-view","attribute-helpers"],optionalRequires:["fluid"]});
YUI.add("hermes-template-fluid-share-embedr-code",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){var r;return r=n.each.call(e,e.displayOptions,{hash:{},inverse:c.noop,fn:c.program(2,d,t),data:t}),r||r===0?r:""}function d(e,t){var n="",r;return n+="data-"+l((r=(r=t,r==null||r===!1?r:r.key),typeof r===f?r.apply(e):r))+'="'+l(typeof e===f?e.apply(e):e)+'" ',n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+='<a data-flickr-embed="true" ',a={hash:{},inverse:c.noop,fn:c.program(1,p,i),data:i},u=(o=n.isFlipped||t.isFlipped,o?o.call(t,t.flippers,"enable-embedr-display-options",a):h.call(t,"isFlipped",t.flippers,"enable-embedr-display-options",a));if(u||u===0)s+=u;return s+=' href="',(u=n.embedLink)?u=u.call(t,{hash:{},data:i}):(u=t.embedLink,u=typeof u===f?u.apply(t):u),s+=l(u)+'" title="',(u=n.title)?u=u.call(t,{hash:{},data:i}):(u=t.title,u=typeof u===f?u.apply(t):u),s+=l(u)+'"><img src="',(u=n.farmURL)?u=u.call(t,{hash:{},data:i}):(u=t.farmURL,u=typeof u===f?u.apply(t):u),s+=l(u)+'" width="',(u=n.width)?u=u.call(t,{hash:{},data:i}):(u=t.width,u=typeof u===f?u.apply(t):u),s+=l(u)+'" height="',(u=n.height)?u=u.call(t,{hash:{},data:i}):(u=t.height,u=typeof u===f?u.apply(t):u),s+=l(u)+'" alt="',(u=n.alt)?u=u.call(t,{hash:{},data:i}):(u=t.alt,u=typeof u===f?u.apply(t):u),s+=l(u)+'"></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script>',s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-embedr-code",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-share-bb-code",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function h(e,t){var r="",i;r+="by [url=",i=n["if"].call(e,e.authorURL,{hash:{},inverse:l.program(4,d,t),fn:l.program(2,p,t),data:t});if(i||i===0)r+=i;return r+="]",(i=n.authorName)?i=i.call(e,{hash:{},data:t}):(i=e.authorName,i=typeof i===a?i.apply(e):i),r+=f(i)+"[/url]",r}function p(e,t){var r;return(r=n.authorURL)?r=r.call(e,{hash:{},data:t}):(r=e.authorURL,r=typeof r===a?r.apply(e):r),f(r)}function d(e,t){return"shortURL"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this,c=n.helperMissing;s+="[url=",(o=n.shortURL)?o=o.call(t,{hash:{},data:i}):(o=t.shortURL,o=typeof o===a?o.apply(t):o),s+=f(o)+"][img]",(o=n.farmURL)?o=o.call(t,{hash:{},data:i}):(o=t.farmURL,o=typeof o===a?o.apply(t):o),s+=f(o)+"[/img][/url][url=",(o=n.shortURL)?o=o.call(t,{hash:{},data:i}):(o=t.shortURL,o=typeof o===a?o.apply(t):o),s+=f(o)+"]",(o=n.title)?o=o.call(t,{hash:{},data:i}):(o=t.title,o=typeof o===a?o.apply(t):o),s+=f(o)+"[/url] ",o=n["if"].call(t,t.authorName,{hash:{},inverse:l.noop,fn:l.program(1,h,i),data:i});if(o||o===0)s+=o;return s+=", ",u={hash:{intlName:"share-modal.ON_FLICKR"},data:i},s+=f((o=n.intlMessage||t.intlMessage,o?o.call(t,u):c.call(t,"intlMessage",u))),s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-bb-code",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
